<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Apache Doris Blog</title>
        <link>https://doris.apache.org/blog/</link>
        <description>Apache Doris Blog</description>
        <lastBuildDate>Mon, 30 Jun 2025 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[The data lakehouse evolution: why Apache Doris is leading the way]]></title>
            <link>https://doris.apache.org/blog/apache-doris-the-data-lakehouse-evolution/</link>
            <guid>https://doris.apache.org/blog/apache-doris-the-data-lakehouse-evolution/</guid>
            <pubDate>Mon, 30 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[As enterprises push forward with building a lakehouse architecture, they often face complex challenges. Apache Doris aims to facilitate this process. It offers easy data access (from Hive, Iceberg, Hudi, Paimon), an extensible connector framework (with Kudu, BigQuery, Delta Lake, Kafka, and Redis) and convenient cross-source data processing with high analytics performance. It also allows easy deployment, a rich set of data storage and management capabilities, and strong support for open table formats and file formats.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">The data lakehouse evolution: why Apache Doris is leading the way</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">velodb.io &#xB7; Rayner Chen, Apache Doris PMC Chair</span></span><time datetime="2025-06-30T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 30, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Community Voice | It’s 2025: How Do You Choose Between Doris and ClickHouse?]]></title>
            <link>https://doris.apache.org/blog/community-voice-2025-how-do-you-choose-between-doris-and-clickhouse/</link>
            <guid>https://doris.apache.org/blog/community-voice-2025-how-do-you-choose-between-doris-and-clickhouse/</guid>
            <pubDate>Mon, 30 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Those in favor of ClickHouse argued for its superior performance, while those supporting Doris emphasized its comprehensive ecosystem and high usability. Ultimately, it took us nearly two months of comprehensive testing to make a decision…]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Community Voice | It&#x2019;s 2025: How Do You Choose Between Doris and ClickHouse?</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Medium &#xB7; Zen Hua</span></span><time datetime="2025-06-30T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 30, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Community Voice | Cut Costs and Boost Efficiency! How Doris’s Unified Lakehouse Breaks Down Data Silos]]></title>
            <link>https://doris.apache.org/blog/community-voice-cut-costs-and-boost-efficiency-how-doriss-unified-lakehouse-breaks-down-data-silos/</link>
            <guid>https://doris.apache.org/blog/community-voice-cut-costs-and-boost-efficiency-how-doriss-unified-lakehouse-breaks-down-data-silos/</guid>
            <pubDate>Sun, 29 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[By leveraging Multi‑Catalog and an extensible connector framework, Doris seamlessly connects to all major data systems and formats — Hive, Iceberg, Hudi, Paimon, LakeSoul, Elasticsearch, MySQL, Oracle, SQL Server, and more.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Community Voice | Cut Costs and Boost Efficiency! How Doris&#x2019;s Unified Lakehouse Breaks Down Data Silos</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Medium &#xB7; Hayden</span></span><time datetime="2025-06-29T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 29, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Community Voice | Breaking Down the Barriers of SQL Dialects and Building a Unified Data Query Ecosystem]]></title>
            <link>https://doris.apache.org/blog/community-voice-doris-breaking-down-the-barriers-of-sql-dialects-and-building-a-unified-data-query-ecosystem/</link>
            <guid>https://doris.apache.org/blog/community-voice-doris-breaking-down-the-barriers-of-sql-dialects-and-building-a-unified-data-query-ecosystem/</guid>
            <pubDate>Sat, 28 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache Doris, with its robust SQL dialect compatibility capabilities, has shattered this barrier and constructed a unified data query ecosystem for users.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Community Voice | Breaking Down the Barriers of SQL Dialects and Building a Unified Data Query Ecosystem</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">dev.to &#xB7; Darren XU</span></span><time datetime="2025-06-28T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 28, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Community Voice | Doris Lakehouse Integration: A New Approach to Data Analysis]]></title>
            <link>https://doris.apache.org/blog/community-voice-doris-lakehouse-integration/</link>
            <guid>https://doris.apache.org/blog/community-voice-doris-lakehouse-integration/</guid>
            <pubDate>Fri, 27 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Doris Lakehouse Integration bridges data lakes and warehouses and enables seamless access, faster queries, unified management, and greater data value.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Community Voice | Doris Lakehouse Integration: A New Approach to Data Analysis</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">DZone &#xB7; Darren XU</span></span><time datetime="2025-06-27T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 27, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Community Voice | Lakehouse: Manus? MCP? Let’s Talk About Lakehouse and AI]]></title>
            <link>https://doris.apache.org/blog/community-voice-lakehouse-manus-mcp-lets-talk-about-lakehouse/</link>
            <guid>https://doris.apache.org/blog/community-voice-lakehouse-manus-mcp-lets-talk-about-lakehouse/</guid>
            <pubDate>Fri, 27 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[The data analytics domain is no exception — Databricks, Snowflake, and Elasticsearch have all redefined themselves as AI data platforms or AI-ready data analytics and search products. Setting aside the “hype”, in today’s article, we’ll explore what relationship actually exists between Lakehouse and AI.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Community Voice | Lakehouse: Manus? MCP? Let&#x2019;s Talk About Lakehouse and AI</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">DZone &#xB7; Mingyu Chen, Apache Doris PMC Chair</span></span><time datetime="2025-06-27T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 27, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Community Voice | Lakehouse: Starting With Apache Doris and S3 Tables]]></title>
            <link>https://doris.apache.org/blog/community-voice-lakehouse-starting-with-apache-doris-s3-tables/</link>
            <guid>https://doris.apache.org/blog/community-voice-lakehouse-starting-with-apache-doris-s3-tables/</guid>
            <pubDate>Thu, 26 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Based on data sharing, diverse workloads and collaboration, Lakehouse has brought us a new paradigm for data analysis. S3 Tables further simplify the setup and maintenance of underlying storage facilities on this basis, achieving a nearly out-of-the-box effect. ]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Community Voice | Lakehouse: Starting With Apache Doris and S3 Tables</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Medium &#xB7; Mingyu Chen, Apache Doris PMC Chair</span></span><time datetime="2025-06-26T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 26, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Community Voice | When Doris Meets Iceberg: A Redemption of a Data Engineer]]></title>
            <link>https://doris.apache.org/blog/community-voice-when-doris-meets-iceberg/</link>
            <guid>https://doris.apache.org/blog/community-voice-when-doris-meets-iceberg/</guid>
            <pubDate>Wed, 25 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache Doris and Iceberg are redefining the way data lakes work. It's not just a simple 1 plus 1 equals to 2; it brings a qualitative leap!]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Community Voice | When Doris Meets Iceberg: A Redemption of a Data Engineer</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">DZone &#xB7; Zen Hua</span></span><time datetime="2025-06-25T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 25, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Top commercial bank migrated from Elasticsearch to Apache Doris for PB-scale log storage and analytics]]></title>
            <link>https://doris.apache.org/blog/top-commercial-bank-migrated-from-elasticsearch-to-apache-doris-for-pb-scale-log-storage-and-analytics/</link>
            <guid>https://doris.apache.org/blog/top-commercial-bank-migrated-from-elasticsearch-to-apache-doris-for-pb-scale-log-storage-and-analytics/</guid>
            <pubDate>Tue, 24 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[By replacing Elasticsearch with Apache Doris, the commercial bank has saved 50% of resources while improving query speed by 2~4× and enjoying much simpler operations and maintenance.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Best Practice</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Top commercial bank migrated from Elasticsearch to Apache Doris for PB-scale log storage and analytics</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">velodb.io &#xB7; VeloDB Engineering Team</span></span><time datetime="2025-06-24T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 24, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Best Practice</category>
        </item>
        <item>
            <title><![CDATA[Community Voice | Apache Doris and DeepSeek: Redefining Intelligent Data Analytics]]></title>
            <link>https://doris.apache.org/blog/apache-doris-and-deepseek-community-voice/</link>
            <guid>https://doris.apache.org/blog/apache-doris-and-deepseek-community-voice/</guid>
            <pubDate>Fri, 20 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[This article will focus on the in — depth integration of Apache Doris and DeepSeek, and will analyze in detail its technical implementation, optimization strategies, application scenarios, and future trends. It is hoped that through this content, you can comprehensively understand the potential of this combination and find a practical path suitable for your business.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Community Voice | Apache Doris and DeepSeek: Redefining Intelligent Data Analytics</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Medium &#xB7; DarrenXu</span></span><time datetime="2025-06-20T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 20, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Community Voice | Introduction to Apache Doris]]></title>
            <link>https://doris.apache.org/blog/doris-introduction-community-voice/</link>
            <guid>https://doris.apache.org/blog/doris-introduction-community-voice/</guid>
            <pubDate>Fri, 20 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[With Apache Doris, we now have a comprehensive solution as a high-performance analytical database. In this tutorial, we’ll explore what makes Doris different, how it works, the ecosystem and tooling, and whether it deserves a place in your data stack.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Community Voice | Introduction to Apache Doris</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">baeldung.com &#xB7; Hannah Igboke</span></span><time datetime="2025-06-20T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 20, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Elasticsearch vs ClickHouse vs Apache Doris — which powers observability better?]]></title>
            <link>https://doris.apache.org/blog/which-powers-observability-better/</link>
            <guid>https://doris.apache.org/blog/which-powers-observability-better/</guid>
            <pubDate>Tue, 17 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[A side-by-side comparison of observability solutions in terms of performance, cost, usability, and ecosystem openness. This article also introduces Apache Doris as a powerful observability solution, supported by live demos and real-world user success stories.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Elasticsearch vs ClickHouse vs Apache Doris &#x2014; which powers observability better?</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">velodb.io &#xB7; VeloDB Engineering Team</span></span><time datetime="2025-06-17T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 17, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 3.0.6 Released]]></title>
            <link>https://doris.apache.org/blog/release-note-3.0.6/</link>
            <guid>https://doris.apache.org/blog/release-note-3.0.6/</guid>
            <pubDate>Mon, 16 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Dear community members, the Apache Doris 3.0.6 version was officially released on Jun 16, 2025, this version introduces continuous upgrades and enhancements in Lakehouse, Query Execution and Compute-Storage Decoupled.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 3.0.6 Released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2025-06-16T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 16, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community members, the Apache Doris 3.0.6 version was officially released on Jun 16, 2025.</p>
<p><strong>Quick Download:</strong> <a href="https://doris.apache.org/download/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href="https://github.com/apache/doris/releases" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavior-changes">Behavior Changes<a href="https://doris.apache.org/blog/release-note-3.0.6/#behavior-changes" class="hash-link" aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">&#x200B;</a></h2>
<ul>
<li><strong>Prohibited time-series compaction for Unique tables</strong> <a href="https://github.com/apache/doris/pull/49905" target="_blank" rel="noopener noreferrer">#49905</a></li>
<li><strong>Adjusted Auto Bucket size to 10GB per bucket in compute-storage separation scenarios</strong> <a href="https://github.com/apache/doris/pull/50566" target="_blank" rel="noopener noreferrer">#50566</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="https://doris.apache.org/blog/release-note-3.0.6/#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.6/#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li><strong>Added support for accessing Iceberg table formats in AWS S3 Table Buckets</strong>
<ul>
<li>For detailed information, please refer to documentation: <a href="https://doris.apache.org/docs/dev/lakehouse/catalogs/iceberg-catalog#iceberg-on-s3-tables" target="_blank" rel="noopener noreferrer">Iceberg on S3 Tables</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage">Storage<a href="https://doris.apache.org/blog/release-note-3.0.6/#storage" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li><strong>IAM Role authorization support for object storage access</strong> Applies to import/export, backup/restore, and compute-storage separation scenarios <a href="https://github.com/apache/doris/pull/50252" target="_blank" rel="noopener noreferrer">#50252</a> <a href="https://github.com/apache/doris/pull/50682" target="_blank" rel="noopener noreferrer">#50682</a> <a href="https://github.com/apache/doris/pull/49541" target="_blank" rel="noopener noreferrer">#49541</a> <a href="https://github.com/apache/doris/pull/49565" target="_blank" rel="noopener noreferrer">#49565</a> <a href="https://github.com/apache/doris/pull/49422" target="_blank" rel="noopener noreferrer">#49422</a>
<ul>
<li>For detailed information, please refer to <a href="https://doris.apache.org/docs/3.0/admin-manual/auth/integrations/aws-authentication-and-authorization" target="_blank" rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-functions">New Functions<a href="https://doris.apache.org/blog/release-note-3.0.6/#new-functions" class="hash-link" aria-label="Direct link to New Functions" title="Direct link to New Functions">&#x200B;</a></h3>
<ul>
<li><code>json_extract_no_quotes</code>
<ul>
<li>For detailed information, please refer to <a href="https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/json-functions/json-extract" target="_blank" rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
<li><code>unhex_null</code>
<ul>
<li>For detailed information, please refer to <a href="https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/string-functions/unhex" target="_blank" rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
<li><code>xpath_string</code>
<ul>
<li>For detailed information, please refer to <a href="https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/string-functions/xpath-string" target="_blank" rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
<li><code>str_to_map</code></li>
<li>For detailed information, please refer to <a href="https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/map-functions/str-to-map" target="_blank" rel="noopener noreferrer">documentation</a></li>
<li><code>months_between</code>
<ul>
<li>For detailed information, please refer to <a href="https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/date-time-functions/months-between" target="_blank" rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
<li><code>next_day</code>
<ul>
<li>For detailed information, please refer to <a href="https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/date-time-functions/next-day" target="_blank" rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
<li><code>format_round</code>:
<ul>
<li>For detailed information, please refer to <a href="https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/numeric-functions/format-round" target="_blank" rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-3.0.6/#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-1">Storage<a href="https://doris.apache.org/blog/release-note-3.0.6/#storage-1" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Streamlined Compaction Profile and logs <a href="https://github.com/apache/doris/pull/50950" target="_blank" rel="noopener noreferrer">#50950</a></li>
<li>Enhanced scheduling strategy to improve Compaction throughput <a href="https://github.com/apache/doris/pull/49882" target="_blank" rel="noopener noreferrer">#49882</a> <a href="https://github.com/apache/doris/pull/48759" target="_blank" rel="noopener noreferrer">#48759</a> <a href="https://github.com/apache/doris/pull/51482" target="_blank" rel="noopener noreferrer">#51482</a> <a href="https://github.com/apache/doris/pull/50672" target="_blank" rel="noopener noreferrer">#50672</a> <a href="https://github.com/apache/doris/pull/49953" target="_blank" rel="noopener noreferrer">#49953</a> <a href="https://github.com/apache/doris/pull/50819" target="_blank" rel="noopener noreferrer">#50819</a></li>
<li><strong>Reduced redundant log output</strong> <a href="https://github.com/apache/doris/pull/51093" target="_blank" rel="noopener noreferrer">#51093</a></li>
<li><strong>Implemented blacklist mechanism</strong> to prevent Routine Load from distributing metadata to unavailable BEs <a href="https://github.com/apache/doris/pull/50587" target="_blank" rel="noopener noreferrer">#50587</a></li>
<li><strong>Increased default value</strong> of <code>load_task_high_priority_threshold_second</code> <a href="https://github.com/apache/doris/pull/50478" target="_blank" rel="noopener noreferrer">#50478</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-compute-decoupled">Storage-Compute Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.6/#storage-compute-decoupled" class="hash-link" aria-label="Direct link to Storage-Compute Decoupled" title="Direct link to Storage-Compute Decoupled">&#x200B;</a></h3>
<ul>
<li><strong>Startup optimization</strong>: Accelerated File Cache initialization <a href="https://github.com/apache/doris/pull/50726" target="_blank" rel="noopener noreferrer">#50726</a></li>
<li><strong>Query acceleration</strong>: Improved File Cache performance <a href="https://github.com/apache/doris/pull/50275" target="_blank" rel="noopener noreferrer">#50275</a> <a href="https://github.com/apache/doris/pull/50387" target="_blank" rel="noopener noreferrer">#50387</a> <a href="https://github.com/apache/doris/pull/50555" target="_blank" rel="noopener noreferrer">#50555</a></li>
<li><strong>Metadata optimization</strong>: Resolved performance bottlenecks caused by <code>get_version</code> <a href="https://github.com/apache/doris/pull/51111" target="_blank" rel="noopener noreferrer">#51111</a> <a href="https://github.com/apache/doris/pull/50439" target="_blank" rel="noopener noreferrer">#50439</a></li>
<li><strong>Garbage collection acceleration</strong>: Improved object reclamation efficiency <a href="https://github.com/apache/doris/pull/50037" target="_blank" rel="noopener noreferrer">#50037</a> <a href="https://github.com/apache/doris/pull/50766" target="_blank" rel="noopener noreferrer">#50766</a></li>
<li><strong>Stability enhancement</strong>: Optimized object storage retry strategy <a href="https://github.com/apache/doris/pull/50957" target="_blank" rel="noopener noreferrer">#50957</a></li>
<li><strong>Granular profiling</strong>: Added tablet/segment footer dimension metrics <a href="https://github.com/apache/doris/pull/49945" target="_blank" rel="noopener noreferrer">#49945</a> <a href="https://github.com/apache/doris/pull/50564" target="_blank" rel="noopener noreferrer">#50564</a> <a href="https://github.com/apache/doris/pull/50326" target="_blank" rel="noopener noreferrer">#50326</a></li>
<li><strong>Schema Change resilience</strong>: Enabled New Tablet Compaction by default to prevent -230 errors <a href="https://github.com/apache/doris/pull/51070" target="_blank" rel="noopener noreferrer">#51070</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-1">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.6/#lakehouse-1" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="catalog-enhancements">Catalog enhancements<a href="https://doris.apache.org/blog/release-note-3.0.6/#catalog-enhancements" class="hash-link" aria-label="Direct link to Catalog enhancements" title="Direct link to Catalog enhancements">&#x200B;</a></h4>
<ul>
<li>Added partition cache TTL control (<code>partition.cache.ttl-second</code>) for Hive Catalog <a href="https://github.com/apache/doris/pull/50724" target="_blank" rel="noopener noreferrer">#50724</a>
<ul>
<li>For detailed information, please refer to documentation: <a href="https://doris.apache.org/docs/dev/lakehouse/meta-cache" target="_blank" rel="noopener noreferrer">Metadata Cache</a></li>
</ul>
</li>
<li>Supported <code>skip.header.line.count</code> property for Hive tables <a href="https://github.com/apache/doris/pull/49929" target="_blank" rel="noopener noreferrer">#49929</a></li>
<li>Added compatibility for Hive tables using <code>org.openx.data.jsonserde.JsonSerDe</code> <a href="https://github.com/apache/doris/pull/49958" target="_blank" rel="noopener noreferrer">#49958</a>
<ul>
<li>For detailed information, please refer to documentation: <a href="https://doris.apache.org/docs/dev/lakehouse/file-formats/text" target="_blank" rel="noopener noreferrer">Text Format</a></li>
</ul>
</li>
<li>Upgraded Paimon to v1.0.1</li>
<li>Upgraded Iceberg to v1.6.1</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="functional-extensions">Functional extensions<a href="https://doris.apache.org/blog/release-note-3.0.6/#functional-extensions" class="hash-link" aria-label="Direct link to Functional extensions" title="Direct link to Functional extensions">&#x200B;</a></h4>
<ul>
<li>Added support for Alibaba Cloud OSS-HDFS Root Policy <a href="https://github.com/apache/doris/pull/50678" target="_blank" rel="noopener noreferrer">#50678</a></li>
<li>Dialect compatibility: Returned query results in Hive format <a href="https://github.com/apache/doris/pull/49931" target="_blank" rel="noopener noreferrer">#49931</a>
<ul>
<li>For detailed information, please refer to documentation: <a href="https://doris.apache.org/docs/dev/lakehouse/sql-convertor/sql-convertor-overview" target="_blank" rel="noopener noreferrer">SQL Convertor</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.6/#asynchronous-materialized-views" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li><strong>Memory optimization</strong>: Reduced memory footprint during transparent rewriting <a href="https://github.com/apache/doris/pull/48887" target="_blank" rel="noopener noreferrer">#48887</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.6/#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li><strong>Improved bucket pruning performance</strong> <a href="https://github.com/apache/doris/pull/49388" target="_blank" rel="noopener noreferrer">#49388</a></li>
<li><strong>Enhanced lambda expressions</strong>: Supported external slot references <a href="https://github.com/apache/doris/pull/44365" target="_blank" rel="noopener noreferrer">#44365</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.6/#query-execution" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li><strong>TopN query acceleration</strong>: Optimized performance in compute-storage separation scenarios <a href="https://github.com/apache/doris/pull/50803" target="_blank" rel="noopener noreferrer">#50803</a></li>
<li><strong>Function extension</strong>: Added variable parameter support for <code>substring_index</code> <a href="https://github.com/apache/doris/pull/50149" target="_blank" rel="noopener noreferrer">#50149</a></li>
<li><strong>Geospatial functions</strong>: Added <code>ST_CONTAINS</code>, <code>ST_INTERSECTS</code>, <code>ST_TOUCHES</code>, and <code>ST_DISJOINT</code> <a href="https://github.com/apache/doris/pull/49665" target="_blank" rel="noopener noreferrer">#49665</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="core-components">Core Components<a href="https://doris.apache.org/blog/release-note-3.0.6/#core-components" class="hash-link" aria-label="Direct link to Core Components" title="Direct link to Core Components">&#x200B;</a></h3>
<ul>
<li><strong>Memory tracker optimization</strong>: ~10% performance gain in high-concurrency scenarios <a href="https://github.com/apache/doris/pull/50462" target="_blank" rel="noopener noreferrer">#50462</a></li>
<li><strong>Audit log enhancement</strong>: Added <code>audit_plugin_max_insert_stmt_length</code> to limit INSERT statement length <a href="https://github.com/apache/doris/pull/51314" target="_blank" rel="noopener noreferrer">#51314</a>
<ul>
<li>For detailed information, please refer to documentation: <a href="https://doris.apache.org/docs/3.0/admin-manual/audit-plugin" target="_blank" rel="noopener noreferrer">Audit Plugin</a></li>
</ul>
</li>
<li><strong>SQL converter control</strong>: Introduced session variables <code>sql_convertor_config</code> and <code>enable_sql_convertor_features</code>
<ul>
<li>For detailed information, please refer to documentation: <a href="https://doris.apache.org/docs/dev/lakehouse/sql-convertor/sql-convertor-overview" target="_blank" rel="noopener noreferrer">SQL Dialect</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-note-3.0.6/#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-ingestion">Data Ingestion<a href="https://doris.apache.org/blog/release-note-3.0.6/#data-ingestion" class="hash-link" aria-label="Direct link to Data Ingestion" title="Direct link to Data Ingestion">&#x200B;</a></h3>
<ul>
<li>Fixed transaction cleanup failures in BE <a href="https://github.com/apache/doris/pull/50103" target="_blank" rel="noopener noreferrer">#50103</a></li>
<li>Improved error reporting accuracy for Routine Load <a href="https://github.com/apache/doris/pull/51078" target="_blank" rel="noopener noreferrer">#51078</a></li>
<li>Prevented metadata task distribution to <code>disable_load=true</code> nodes <a href="https://github.com/apache/doris/pull/50421" target="_blank" rel="noopener noreferrer">#50421</a></li>
<li>Fixed consumption progress rollback after FE restart <a href="https://github.com/apache/doris/pull/50221" target="_blank" rel="noopener noreferrer">#50221</a></li>
<li>Resolved Group Commit and Schema Change conflict causing Core Dump <a href="https://github.com/apache/doris/pull/51144" target="_blank" rel="noopener noreferrer">#51144</a></li>
<li>Fixed S3 Load errors when using HTTPS protocol <a href="https://github.com/apache/doris/pull/51246" target="_blank" rel="noopener noreferrer">#51246</a> <a href="https://github.com/apache/doris/pull/51529" target="_blank" rel="noopener noreferrer">#51529</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="primary-key-model">Primary Key Model<a href="https://doris.apache.org/blog/release-note-3.0.6/#primary-key-model" class="hash-link" aria-label="Direct link to Primary Key Model" title="Direct link to Primary Key Model">&#x200B;</a></h3>
<ul>
<li>Fixed duplicate key issues caused by race conditions <a href="https://github.com/apache/doris/pull/50019" target="_blank" rel="noopener noreferrer">#50019</a> <a href="https://github.com/apache/doris/pull/50051" target="_blank" rel="noopener noreferrer">#50051</a> <a href="https://github.com/apache/doris/pull/50106" target="_blank" rel="noopener noreferrer">#50106</a> <a href="https://github.com/apache/doris/pull/50417" target="_blank" rel="noopener noreferrer">#50417</a> <a href="https://github.com/apache/doris/pull/50847" target="_blank" rel="noopener noreferrer">#50847</a> <a href="https://github.com/apache/doris/pull/50974" target="_blank" rel="noopener noreferrer">#50974</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-2">Storage<a href="https://doris.apache.org/blog/release-note-3.0.6/#storage-2" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Fixed CCR and disk balancing race conditions <a href="https://github.com/apache/doris/pull/50663" target="_blank" rel="noopener noreferrer">#50663</a></li>
<li>Corrected missing persistence of default partition keys <a href="https://github.com/apache/doris/pull/50489" target="_blank" rel="noopener noreferrer">#50489</a></li>
<li>Added Rollup table support for CCR <a href="https://github.com/apache/doris/pull/50337" target="_blank" rel="noopener noreferrer">#50337</a></li>
<li>Fixed edge case when <code>cooldown_ttl=0</code> <a href="https://github.com/apache/doris/pull/50830" target="_blank" rel="noopener noreferrer">#50830</a></li>
<li>Resolved data loss caused by GC and Publish contention <a href="https://github.com/apache/doris/pull/50343" target="_blank" rel="noopener noreferrer">#50343</a></li>
<li>Fixed partition pruning failure in Delete Job <a href="https://github.com/apache/doris/pull/50674" target="_blank" rel="noopener noreferrer">#50674</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-compute-decoupled-1">Storage-Compute Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.6/#storage-compute-decoupled-1" class="hash-link" aria-label="Direct link to Storage-Compute Decoupled" title="Direct link to Storage-Compute Decoupled">&#x200B;</a></h3>
<ul>
<li>Fixed Schema Change blocking Compaction <a href="https://github.com/apache/doris/pull/50908" target="_blank" rel="noopener noreferrer">#50908</a></li>
<li>Solved object reclamation failure when <code>storage_vault_prefix</code> is empty <a href="https://github.com/apache/doris/pull/50352" target="_blank" rel="noopener noreferrer">#50352</a></li>
<li>Resolved query performance issues caused by Tablet Cache <a href="https://github.com/apache/doris/pull/51193" target="_blank" rel="noopener noreferrer">#51193</a> <a href="https://github.com/apache/doris/pull/49420" target="_blank" rel="noopener noreferrer">#49420</a></li>
<li>Eliminated performance jitter from residual Tablet Cache <a href="https://github.com/apache/doris/pull/50200" target="_blank" rel="noopener noreferrer">#50200</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-2">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.6/#lakehouse-2" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li><strong>Export fixes</strong>
<ul>
<li>Fixed FE memory leaks <a href="https://github.com/apache/doris/pull/51171" target="_blank" rel="noopener noreferrer">#51171</a></li>
<li>Prevented FE deadlocks <a href="https://github.com/apache/doris/pull/50088" target="_blank" rel="noopener noreferrer">#50088</a></li>
</ul>
</li>
<li><strong>Catalog fixes</strong>
<ul>
<li>Enabled composite predicate pushdown for JDBC Catalog <a href="https://github.com/apache/doris/pull/50542" target="_blank" rel="noopener noreferrer">#50542</a></li>
<li>Fixed Deletion Vector reading for Alibaba Cloud OSS Paimon tables <a href="https://github.com/apache/doris/pull/49645" target="_blank" rel="noopener noreferrer">#49645</a></li>
<li>Supported comma-containing Hive partition values <a href="https://github.com/apache/doris/pull/49382" target="_blank" rel="noopener noreferrer">#49382</a></li>
<li>Corrected MaxCompute Timestamp column parsing <a href="https://github.com/apache/doris/pull/49600" target="_blank" rel="noopener noreferrer">#49600</a></li>
<li>Enabled <code>information_schema</code> system tables for Trino Catalog <a href="https://github.com/apache/doris/pull/49912" target="_blank" rel="noopener noreferrer">#49912</a></li>
</ul>
</li>
<li><strong>File formats</strong>
<ul>
<li>Fixed LZO compression reading failures <a href="https://github.com/apache/doris/pull/49538" target="_blank" rel="noopener noreferrer">#49538</a></li>
<li>Added legacy ORC file compatibility <a href="https://github.com/apache/doris/pull/50358" target="_blank" rel="noopener noreferrer">#50358</a></li>
<li>Corrected complex type parsing in ORC files <a href="https://github.com/apache/doris/pull/50136" target="_blank" rel="noopener noreferrer">#50136</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views-1">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.6/#asynchronous-materialized-views-1" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Fixed refresh miss when specifying both <code>start time</code> and immediate trigger modes <a href="https://github.com/apache/doris/pull/50624" target="_blank" rel="noopener noreferrer">#50624</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.6/#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Fixed rewriting errors with lambda expressions <a href="https://github.com/apache/doris/pull/49166" target="_blank" rel="noopener noreferrer">#49166</a></li>
<li>Resolved planning failures with constant group by keys <a href="https://github.com/apache/doris/pull/49473" target="_blank" rel="noopener noreferrer">#49473</a></li>
<li>Corrected constant folding logic <a href="https://github.com/apache/doris/pull/50142" target="_blank" rel="noopener noreferrer">#50142</a> <a href="https://github.com/apache/doris/pull/50810" target="_blank" rel="noopener noreferrer">#50810</a></li>
<li>Completed system table information retrieval <a href="https://github.com/apache/doris/pull/50721" target="_blank" rel="noopener noreferrer">#50721</a></li>
<li>Fixed column type handling when creating views with NULL Literal <a href="https://github.com/apache/doris/pull/49881" target="_blank" rel="noopener noreferrer">#49881</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-1">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.6/#query-execution-1" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Fixed BE crashes caused by illegal JSON values during import <a href="https://github.com/apache/doris/pull/50978" target="_blank" rel="noopener noreferrer">#50978</a></li>
<li>Corrected Intersect results with NULL constant inputs <a href="https://github.com/apache/doris/pull/50951" target="_blank" rel="noopener noreferrer">#50951</a></li>
<li>Fixed predicate mis-execution with Variant types <a href="https://github.com/apache/doris/pull/50934" target="_blank" rel="noopener noreferrer">#50934</a></li>
<li>Resolved <code>get_json_string</code> errors with illegal JSON Paths <a href="https://github.com/apache/doris/pull/50859" target="_blank" rel="noopener noreferrer">#50859</a></li>
<li>Aligned function behaviors (JSON_REPLACE/INSERT/SET/ARRAY) with MySQL <a href="https://github.com/apache/doris/pull/50308" target="_blank" rel="noopener noreferrer">#50308</a></li>
<li>Fixed <code>array_map</code> crashes with empty parameters <a href="https://github.com/apache/doris/pull/50201" target="_blank" rel="noopener noreferrer">#50201</a></li>
<li>Prevented core dumps during abnormal Variant-to-JSONB conversion <a href="https://github.com/apache/doris/pull/50180" target="_blank" rel="noopener noreferrer">#50180</a></li>
<li>Added missing <code>explode_json_array_json_outer</code> function <a href="https://github.com/apache/doris/pull/50164" target="_blank" rel="noopener noreferrer">#50164</a></li>
<li>Aligned results between <code>percentile</code> and <code>percentile_array</code> <a href="https://github.com/apache/doris/pull/49351" target="_blank" rel="noopener noreferrer">#49351</a></li>
<li>Optimized UTF8 handling for functions (url_encode/strright/append_trailing_char_if_absent) <a href="https://github.com/apache/doris/pull/49127" target="_blank" rel="noopener noreferrer">#49127</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="https://doris.apache.org/blog/release-note-3.0.6/#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Fixed audit log loss in high-concurrency scenarios <a href="https://github.com/apache/doris/pull/50357" target="_blank" rel="noopener noreferrer">#50357</a></li>
<li>Prevented metadata replay failures during dynamic partition creation <a href="https://github.com/apache/doris/pull/49569" target="_blank" rel="noopener noreferrer">#49569</a></li>
<li>Solved Global UDF loss after restart <a href="https://github.com/apache/doris/pull/50279" target="_blank" rel="noopener noreferrer">#50279</a></li>
<li>Aligned View metadata return format with MySQL <a href="https://github.com/apache/doris/pull/51058" target="_blank" rel="noopener noreferrer">#51058</a></li>
</ul></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Community Voice: Elasticsearch vs. Apache Doris]]></title>
            <link>https://doris.apache.org/blog/elasticsearch-vs-apache-doris-community-voice/</link>
            <guid>https://doris.apache.org/blog/elasticsearch-vs-apache-doris-community-voice/</guid>
            <pubDate>Tue, 10 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[ Listen to what users say! Rahul Kolluri has provided a detailed technical comparison between Elasticsearch and Apache Doris based on real-world billing analytics scenarios. Based on his experience building dashboards and backend APIs around AWS usage and billing data, he saw Elasticsearch hit major limits when used for analytics.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Community Voice: Elasticsearch vs. Apache Doris</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">LinkedIn &#xB7; Rahul Kolluri</span></span><time datetime="2025-06-10T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">June 10, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 2.1.10 released]]></title>
            <link>https://doris.apache.org/blog/release-note-2.1.10/</link>
            <guid>https://doris.apache.org/blog/release-note-2.1.10/</guid>
            <pubDate>Sat, 17 May 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[This version introduces continuous upgrades and enhancements in Query Execution Engine and Lakehouse. It also resolves critical bugs to improve stability and performance.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 2.1.10 released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2025-05-17T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">May 17, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear Community, <strong>Apache Doris version 2.1.10 is now available</strong>. This version introduces continuous upgrades and enhancements in Query Execution Engine and Lakehouse. It also resolves critical bugs to improve stability and performance.</p>
<ul>
<li>
<p><a href="https://doris.apache.org/download" target="_blank" rel="noopener noreferrer">Quick Download</a></p>
</li>
<li>
<p><a href="https://github.com/apache/doris/releases/tag/2.1.10-rc01" target="_blank" rel="noopener noreferrer">GitHub Release</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavior-changes">Behavior Changes<a href="https://doris.apache.org/blog/release-note-2.1.10/#behavior-changes" class="hash-link" aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">&#x200B;</a></h2>
<ul>
<li>DELETE no longer incorrectly requires the SELECT_PRIV permission on the target table. <a href="https://github.com/apache/doris/pull/49794" target="_blank" rel="noopener noreferrer"> #49794</a></li>
<li>Insert Overwrite no longer restricts concurrent operations on the same table to 1. <a href="https://github.com/apache/doris/pull/48673" target="_blank" rel="noopener noreferrer"> #48673</a></li>
<li>Merge on write unique tables prohibit the use of time-series compaction. <a href="https://github.com/apache/doris/pull/49905" target="_blank" rel="noopener noreferrer"> #49905</a></li>
<li>Building indexes on VARIANT type columns is prohibited. <a href="https://github.com/apache/doris/pull/49159" target="_blank" rel="noopener noreferrer"> #49159</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="https://doris.apache.org/blog/release-note-2.1.10/#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-engine">Query Execution Engine<a href="https://doris.apache.org/blog/release-note-2.1.10/#query-execution-engine" class="hash-link" aria-label="Direct link to Query Execution Engine" title="Direct link to Query Execution Engine">&#x200B;</a></h3>
<ul>
<li>Added support for more GEO type computation functions: <code>ST_CONTAINS</code>, <code>ST_INTERSECTS</code>, <code>ST_TOUCHES</code>, <code>GeometryFromText</code>, <code>ST_Intersects</code>, <code>ST_Disjoint</code>, <code>ST_Touches</code>. <a href="https://github.com/apache/doris/pull/49665" target="_blank" rel="noopener noreferrer"> #49665</a> <a href="https://github.com/apache/doris/pull/48695" target="_blank" rel="noopener noreferrer"> #48695</a></li>
<li>Added support for the <code>years_of_week</code> function. <a href="https://github.com/apache/doris/pull/48870" target="_blank" rel="noopener noreferrer"> #48870</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.10/#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Hive Catalog now supports catalog-level partition cache control. <a href="https://github.com/apache/doris/pull/50724" target="_blank" rel="noopener noreferrer"> #50724</a>
<ul>
<li>For more details, refer to the<a href="https://doris.apache.org/docs/dev/lakehouse/meta-cache" target="_blank" rel="noopener noreferrer"> </a><a href="https://doris.apache.org/docs/dev/lakehouse/meta-cache#disable-hive-catalog-metadata-cache" target="_blank" rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-2.1.10/#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-1">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.10/#lakehouse-1" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Upgraded the Paimon dependency version to 1.0.1.</li>
<li>Upgraded the Iceberg dependency version to 1.6.1.</li>
<li>Included the memory overhead of Parquet Footer in the Memory Tracker to avoid potential OOM issues. <a href="https://github.com/apache/doris/pull/49037" target="_blank" rel="noopener noreferrer"> #49037</a></li>
<li>Optimized the predicate pushdown logic for JDBC Catalog, supporting pushdown of AND/OR connected predicates. <a href="https://github.com/apache/doris/pull/50542" target="_blank" rel="noopener noreferrer"> #50542</a></li>
<li>Precompiled versions now include the Jindofs extension package by default to support Alibaba Cloud oss-hdfs access.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management">Semi-Structured Data Management<a href="https://doris.apache.org/blog/release-note-2.1.10/#semi-structured-data-management" class="hash-link" aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">&#x200B;</a></h3>
<ul>
<li>ANY function now supports JSON type. <a href="https://github.com/apache/doris/pull/50311" target="_blank" rel="noopener noreferrer"> #50311</a></li>
<li>JSON_REPLACE, JSON_INSERT, JSON_SET, JSON_ARRAY functions now support JSON data type and complex data types. <a href="https://github.com/apache/doris/pull/50308" target="_blank" rel="noopener noreferrer"> #50308</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-2.1.10/#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>When the number of options in an IN expression exceeds <code>Config.max_distribution_pruner_recursion_depth</code>, bucket pruning is not performed to improve planning speed. <a href="https://github.com/apache/doris/pull/49387" target="_blank" rel="noopener noreferrer"> #49387</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.10/#storage-management" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>Reduced logging and improved some log messages. <a href="https://github.com/apache/doris/pull/47647" target="_blank" rel="noopener noreferrer"> #47647</a> <a href="https://github.com/apache/doris/pull/48523" target="_blank" rel="noopener noreferrer"> #48523</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other">Other<a href="https://doris.apache.org/blog/release-note-2.1.10/#other" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">&#x200B;</a></h3>
<ul>
<li>Avoided the thrift rpc END_OF_FILE exception. <a href="https://github.com/apache/doris/pull/49649" target="_blank" rel="noopener noreferrer"> #49649</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-note-2.1.10/#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-2">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.10/#lakehouse-2" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where newly created tables in Hive were not immediately visible in Doris. <a href="https://github.com/apache/doris/pull/50188" target="_blank" rel="noopener noreferrer"> #50188</a></li>
<li>Fixed the error &quot;Storage schema reading not supported&quot; when accessing certain Text format Hive tables. <a href="https://github.com/apache/doris/pull/50038" target="_blank" rel="noopener noreferrer"> #50038</a>
<ul>
<li>Refer to the<a href="https://doris.apache.org/docs/dev/lakehouse/catalogs/hive-catalog?_highlight=get_schema_from_table#syntax" target="_blank" rel="noopener noreferrer"> get_schema_from_table documentation</a> for details.</li>
</ul>
</li>
<li>Fixed concurrency issues with metadata submission when writing to Hive/Iceberg tables. <a href="https://github.com/apache/doris/pull/49842" target="_blank" rel="noopener noreferrer"> #49842</a></li>
<li>Fixed the issue where writing to Hive tables stored on oss-hdfs failed. <a href="https://github.com/apache/doris/pull/49754" target="_blank" rel="noopener noreferrer"> #49754</a></li>
<li>Fixed the issue where accessing Hive tables with partition key values containing commas failed. <a href="https://github.com/apache/doris/pull/49382" target="_blank" rel="noopener noreferrer"> #49382</a></li>
<li>Fixed the issue where Split allocation for Paimon tables was uneven in certain cases. <a href="https://github.com/apache/doris/pull/50083" target="_blank" rel="noopener noreferrer"> #50083</a></li>
<li>Fixed the issue where Delete files were not correctly handled when reading Paimon tables stored on oss. <a href="https://github.com/apache/doris/pull/49645" target="_blank" rel="noopener noreferrer"> #49645</a></li>
<li>Fixed the issue where reading high-precision Timestamp columns in MaxCompute Catalog failed. <a href="https://github.com/apache/doris/pull/49600" target="_blank" rel="noopener noreferrer"> #49600</a></li>
<li>Fixed the potential resource leakage when deleting a Catalog in certain cases. <a href="https://github.com/apache/doris/pull/49621" target="_blank" rel="noopener noreferrer"> #49621</a></li>
<li>Fixed the issue where reading LZO compressed data failed in certain cases. <a href="https://github.com/apache/doris/pull/49538" target="_blank" rel="noopener noreferrer"> #49538</a></li>
<li>Fixed the issue where ORC deferred materialization caused errors when reading complex types. <a href="https://github.com/apache/doris/pull/50136" target="_blank" rel="noopener noreferrer"> #50136</a></li>
<li>Fixed the issue where reading ORC files generated by pyorc-0.3 version failed. <a href="https://github.com/apache/doris/pull/50358" target="_blank" rel="noopener noreferrer"> #50358</a></li>
<li>Fixed the issue where EXPORT operations caused metadata deadlocks. <a href="https://github.com/apache/doris/pull/50088" target="_blank" rel="noopener noreferrer"> #50088</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="indexing">Indexing<a href="https://doris.apache.org/blog/release-note-2.1.10/#indexing" class="hash-link" aria-label="Direct link to Indexing" title="Direct link to Indexing">&#x200B;</a></h3>
<ul>
<li>Fixed errors in building inverted indexes after multiple add, delete, and rename column operations. <a href="https://github.com/apache/doris/pull/50056" target="_blank" rel="noopener noreferrer"> #50056</a></li>
<li>Added validation for unique column IDs in index compaction to avoid potential data anomalies and system errors. <a href="https://github.com/apache/doris/pull/47562" target="_blank" rel="noopener noreferrer"> #47562</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-types">Semi-Structured Data Types<a href="https://doris.apache.org/blog/release-note-2.1.10/#semi-structured-data-types" class="hash-link" aria-label="Direct link to Semi-Structured Data Types" title="Direct link to Semi-Structured Data Types">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where converting VARIANT type to JSON type returned NULL in certain cases. <a href="https://github.com/apache/doris/pull/50180" target="_blank" rel="noopener noreferrer"> #50180</a></li>
<li>Fixed the crash caused by JSONB CAST in certain cases. <a href="https://github.com/apache/doris/pull/49810" target="_blank" rel="noopener noreferrer"> #49810</a></li>
<li>Prohibited building indexes on VARIANT type columns. <a href="https://github.com/apache/doris/pull/49159" target="_blank" rel="noopener noreferrer"> #49159</a></li>
<li>Fixed the precision correctness of decimal type in the named_struct function. <a href="https://github.com/apache/doris/pull/48964" target="_blank" rel="noopener noreferrer"> #48964</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-2.1.10/#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Fixed several issues in constant folding. <a href="https://github.com/apache/doris/pull/49413" target="_blank" rel="noopener noreferrer">#49413</a> <a href="https://github.com/apache/doris/pull/50425" target="_blank" rel="noopener noreferrer">#50425</a> <a href="https://github.com/apache/doris/pull/49686" target="_blank" rel="noopener noreferrer">#49686</a> <a href="https://github.com/apache/doris/pull/49575" target="_blank" rel="noopener noreferrer">#49575</a> <a href="https://github.com/apache/doris/pull/50142" target="_blank" rel="noopener noreferrer">#50142</a></li>
<li>Common subexpression extraction may not work properly on lambda expressions. <a href="https://github.com/apache/doris/pull/49166" target="_blank" rel="noopener noreferrer">#49166</a></li>
<li>Fixed the issue where eliminating constants in group by keys might not work properly. <a href="https://github.com/apache/doris/pull/49589" target="_blank" rel="noopener noreferrer">#49589</a></li>
<li>Fixed the issue where planning failed in extreme scenarios due to incorrect statistics inference. <a href="https://github.com/apache/doris/pull/49415" target="_blank" rel="noopener noreferrer">#49415</a></li>
<li>Fixed the issue where some information_schema tables depending on BE metadata could not retrieve complete data. <a href="https://github.com/apache/doris/pull/50721" target="_blank" rel="noopener noreferrer">#50721</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-engine-1">Query Execution Engine<a href="https://doris.apache.org/blog/release-note-2.1.10/#query-execution-engine-1" class="hash-link" aria-label="Direct link to Query Execution Engine" title="Direct link to Query Execution Engine">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where the explode_json_array_json_outer function was not found. <a href="https://github.com/apache/doris/pull/50164" target="_blank" rel="noopener noreferrer">#50164</a></li>
<li>Fixed the issue where substring_index did not support dynamic parameters. <a href="https://github.com/apache/doris/pull/50149" target="_blank" rel="noopener noreferrer">#50149</a></li>
<li>Fixed the issue where the st_contains function returned incorrect results in many cases. <a href="https://github.com/apache/doris/pull/50115" target="_blank" rel="noopener noreferrer">#50115</a></li>
<li>Fixed the core dump issue that could be caused by the array_range function. <a href="https://github.com/apache/doris/pull/49993" target="_blank" rel="noopener noreferrer">#49993</a></li>
<li>Fixed the issue where the date_diff function returned incorrect results. <a href="https://github.com/apache/doris/pull/49429" target="_blank" rel="noopener noreferrer">#49429</a></li>
<li>Fixed a series of issues with string functions causing garbled output or incorrect results in non-ASCII encodings. <a href="https://github.com/apache/doris/pull/49231" target="_blank" rel="noopener noreferrer">#49231</a> <a href="https://github.com/apache/doris/pull/49846" target="_blank" rel="noopener noreferrer">#49846</a> <a href="https://github.com/apache/doris/pull/49127" target="_blank" rel="noopener noreferrer">#49127</a> <a href="https://github.com/apache/doris/pull/40710" target="_blank" rel="noopener noreferrer">#40710</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management-1">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.10/#storage-management-1" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where metadata replay for dynamic partition tables failed in certain cases. <a href="https://github.com/apache/doris/pull/49569" target="_blank" rel="noopener noreferrer">#49569</a></li>
<li>Fixed the issue where streamload on ARM might lose data due to operation sequence. <a href="https://github.com/apache/doris/pull/48948" target="_blank" rel="noopener noreferrer">#48948</a></li>
<li>Fixed the error in full compaction and the potential issue of mow data duplication. <a href="https://github.com/apache/doris/pull/49825" target="_blank" rel="noopener noreferrer">#49825</a> <a href="https://github.com/apache/doris/pull/48958" target="_blank" rel="noopener noreferrer">#48958</a></li>
<li>Fixed the issue where partition storage policy was not persisted. <a href="https://github.com/apache/doris/pull/49721" target="_blank" rel="noopener noreferrer">#49721</a></li>
<li>Fixed the extremely rare issue where imported files did not exist. <a href="https://github.com/apache/doris/pull/50343" target="_blank" rel="noopener noreferrer">#50343</a></li>
<li>Fixed the issue where ccr and disk balancing concurrency might cause files to go missing. <a href="https://github.com/apache/doris/pull/50663" target="_blank" rel="noopener noreferrer">#50663</a></li>
<li>Fixed the connection reset issue that might occur during backup and restore of large snapshots. <a href="https://github.com/apache/doris/pull/49649" target="_blank" rel="noopener noreferrer">#49649</a></li>
<li>Fixed the issue where FE follower lost local backup snapshots. <a href="https://github.com/apache/doris/pull/49550" target="_blank" rel="noopener noreferrer">#49550</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="https://doris.apache.org/blog/release-note-2.1.10/#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where audit logs might be lost in certain scenarios. <a href="https://github.com/apache/doris/pull/50357" target="_blank" rel="noopener noreferrer">#50357</a></li>
<li>Fixed the issue where the isQuery flag in audit logs might be incorrect. <a href="https://github.com/apache/doris/pull/49959" target="_blank" rel="noopener noreferrer">#49959</a></li>
<li>Fixed the issue where some query sqlHash values in audit logs were incorrect. <a href="https://github.com/apache/doris/pull/49984" target="_blank" rel="noopener noreferrer">#49984</a></li>
</ul></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 3.0.5 Released]]></title>
            <link>https://doris.apache.org/blog/release-note-3.0.5/</link>
            <guid>https://doris.apache.org/blog/release-note-3.0.5/</guid>
            <pubDate>Mon, 28 Apr 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Dear community members, the Apache Doris 3.0.5 version was officially released on April 28, 2025, this version introduces continuous upgrades and enhancements in several key areas, including Lakehouse, Asynchronous Materialized Views, Semi-structured Data Management and more.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 3.0.5 Released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2025-04-28T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">April 28, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community members, the Apache Doris 3.0.5 version was officially released on April 28, 2025, this version introduces continuous upgrades and enhancements in several key areas, including Lakehouse, Asynchronous Materialized Views, Semi-structured Data Management and more.</p>
<p><strong>Quick Download:</strong> <a href="https://doris.apache.org/download/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href="https://github.com/apache/doris/releases" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="https://doris.apache.org/blog/release-note-3.0.5/#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.5/#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Added Catalog/Database/Table quantity monitoring metrics to FE Metrics (<a href="https://github.com/apache/doris/pull/47891" target="_blank" rel="noopener noreferrer">#47891</a>)</li>
<li>MaxCompute Catalog now supports Timestamp type (<a href="https://github.com/apache/doris/pull/48768" target="_blank" rel="noopener noreferrer">#48768</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.5/#query-execution" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Added URL processing functions: <code>top_level_domain</code>, <code>first_significant_subdomain</code>, <code>cut_to_first_significant_subdomain</code> (<a href="https://github.com/apache/doris/pull/42488" target="_blank" rel="noopener noreferrer">#42488</a>)</li>
<li>Added <code>year_of_week</code> function with Trino-compatible implementation (<a href="https://github.com/apache/doris/pull/48870" target="_blank" rel="noopener noreferrer">#48870</a>)</li>
<li><code>percentile_array</code> function now supports Float and Double data types (<a href="https://github.com/apache/doris/pull/48094" target="_blank" rel="noopener noreferrer">#48094</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-compute-separation">Storage-Compute Separation<a href="https://doris.apache.org/blog/release-note-3.0.5/#storage-compute-separation" class="hash-link" aria-label="Direct link to Storage-Compute Separation" title="Direct link to Storage-Compute Separation">&#x200B;</a></h3>
<ul>
<li>Added compute group renaming support (<a href="https://github.com/apache/doris/pull/46221" target="_blank" rel="noopener noreferrer">#46221</a>)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-3.0.5/#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage">Storage<a href="https://doris.apache.org/blog/release-note-3.0.5/#storage" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Accelerated Compaction task generation to improve performance (<a href="https://github.com/apache/doris/pull/49547" target="_blank" rel="noopener noreferrer">#49547</a>)</li>
<li>Stream Load now supports compressed JSON file ingestion (<a href="https://github.com/apache/doris/pull/49044" target="_blank" rel="noopener noreferrer">#49044</a>)</li>
<li>Enhanced error messages for various ingestion scenarios (<a href="https://github.com/apache/doris/pull/48436" target="_blank" rel="noopener noreferrer">#48436</a> <a href="https://github.com/apache/doris/pull/47721" target="_blank" rel="noopener noreferrer">#47721</a> <a href="https://github.com/apache/doris/pull/47804" target="_blank" rel="noopener noreferrer">#47804</a> <a href="https://github.com/apache/doris/pull/48638" target="_blank" rel="noopener noreferrer">#48638</a> <a href="https://github.com/apache/doris/pull/48344" target="_blank" rel="noopener noreferrer">#48344</a> <a href="https://github.com/apache/doris/pull/49287" target="_blank" rel="noopener noreferrer">#49287</a> <a href="https://github.com/apache/doris/pull/48009" target="_blank" rel="noopener noreferrer">#48009</a>)</li>
<li>Added multiple metrics for Routine Load (<a href="https://github.com/apache/doris/pull/49045" target="_blank" rel="noopener noreferrer">#49045</a> <a href="https://github.com/apache/doris/pull/48764" target="_blank" rel="noopener noreferrer">#48764</a>)</li>
<li>Optimized Routine Load scheduling algorithm to prevent single job failure from affecting overall scheduling (<a href="https://github.com/apache/doris/pull/47847" target="_blank" rel="noopener noreferrer">#47847</a>)</li>
<li>Added Routine Load system table (<a href="https://github.com/apache/doris/pull/49284" target="_blank" rel="noopener noreferrer">#49284</a>)</li>
<li>Improved query performance for Merge-On-Write (MOW) tables under high-frequency ingestion (<a href="https://github.com/apache/doris/pull/48968" target="_blank" rel="noopener noreferrer">#48968</a>)</li>
<li>Enhanced Profile information display for Key Range queries (<a href="https://github.com/apache/doris/pull/48191" target="_blank" rel="noopener noreferrer">#48191</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.5/#compute-storage-decoupled" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>Fixed multiple File Cache stability and performance issues (<a href="https://github.com/apache/doris/pull/48786" target="_blank" rel="noopener noreferrer">#48786</a> <a href="https://github.com/apache/doris/pull/48623" target="_blank" rel="noopener noreferrer">#48623</a> <a href="https://github.com/apache/doris/pull/48687" target="_blank" rel="noopener noreferrer">#48687</a> <a href="https://github.com/apache/doris/pull/49050" target="_blank" rel="noopener noreferrer">#49050</a> <a href="https://github.com/apache/doris/pull/48318" target="_blank" rel="noopener noreferrer">#48318</a>)</li>
<li>Improved validation logic for Storage Vault creation (<a href="https://github.com/apache/doris/pull/48073" target="_blank" rel="noopener noreferrer">#48073</a> <a href="https://github.com/apache/doris/pull/48369" target="_blank" rel="noopener noreferrer">#48369</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-1">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.5/#lakehouse-1" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Optimized BE Scanner closure logic for Trino Connector Catalog to accelerate memory release (<a href="https://github.com/apache/doris/pull/47857" target="_blank" rel="noopener noreferrer">#47857</a>)</li>
<li>ClickHouse JDBC Catalog now auto-adapts to different driver versions (<a href="https://github.com/apache/doris/pull/46026" target="_blank" rel="noopener noreferrer">#46026</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.5/#asynchronous-materialized-views" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Enhanced planning performance for transparent rewrite (<a href="https://github.com/apache/doris/pull/48782" target="_blank" rel="noopener noreferrer">#48782</a>)</li>
<li>Optimized <code>tvf mv_infos</code> performance (<a href="https://github.com/apache/doris/pull/47415" target="_blank" rel="noopener noreferrer">#47415</a>)</li>
<li>Disabled catalog metadata refresh during external table-based MV construction to reduce memory usage (<a href="https://github.com/apache/doris/pull/48767" target="_blank" rel="noopener noreferrer">#48767</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.5/#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Improved statistics collection performance for key columns and partition columns (<a href="https://github.com/apache/doris/pull/46534" target="_blank" rel="noopener noreferrer">#46534</a>)</li>
<li>Query result aliases now strictly match user input (<a href="https://github.com/apache/doris/pull/47093" target="_blank" rel="noopener noreferrer">#47093</a>)</li>
<li>Enhanced column pruning after common subexpression extraction in aggregation operators (<a href="https://github.com/apache/doris/pull/46627" target="_blank" rel="noopener noreferrer">#46627</a>)</li>
<li>Improved error messages for function binding failures and unsupported subqueries (<a href="https://github.com/apache/doris/pull/47919" target="_blank" rel="noopener noreferrer">#47919</a> <a href="https://github.com/apache/doris/pull/47985" target="_blank" rel="noopener noreferrer">#47985</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management">Semi-structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.5/#semi-structured-data-management" class="hash-link" aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">&#x200B;</a></h3>
<ul>
<li><code>json_object</code> function now supports complex type parameters (<a href="https://github.com/apache/doris/pull/47779" target="_blank" rel="noopener noreferrer">#47779</a>)</li>
<li>Added support for writing UInt128 to IPv6 type (<a href="https://github.com/apache/doris/pull/48802" target="_blank" rel="noopener noreferrer">#48802</a>)</li>
<li>Enabled inverted index support for ARRAY fields in VARIANT type (<a href="https://github.com/apache/doris/pull/47688" target="_blank" rel="noopener noreferrer">#47688</a> <a href="https://github.com/apache/doris/pull/48117" target="_blank" rel="noopener noreferrer">#48117</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="security">Security<a href="https://doris.apache.org/blog/release-note-3.0.5/#security" class="hash-link" aria-label="Direct link to Security" title="Direct link to Security">&#x200B;</a></h3>
<ul>
<li>Improved Ranger authorization performance (<a href="https://github.com/apache/doris/pull/49352" target="_blank" rel="noopener noreferrer">#49352</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="https://doris.apache.org/blog/release-note-3.0.5/#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Optimized JVM Metrics interface performance (<a href="https://github.com/apache/doris/pull/49380" target="_blank" rel="noopener noreferrer">#49380</a>)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-note-3.0.5/#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-1">Storage<a href="https://doris.apache.org/blog/release-note-3.0.5/#storage-1" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Fixed data correctness issues in several edge cases (<a href="https://github.com/apache/doris/pull/48056" target="_blank" rel="noopener noreferrer">#48056</a> <a href="https://github.com/apache/doris/pull/48399" target="_blank" rel="noopener noreferrer">#48399</a> <a href="https://github.com/apache/doris/pull/48400" target="_blank" rel="noopener noreferrer">#48400</a> <a href="https://github.com/apache/doris/pull/48748" target="_blank" rel="noopener noreferrer">#48748</a> <a href="https://github.com/apache/doris/pull/48775" target="_blank" rel="noopener noreferrer">#48775</a> <a href="https://github.com/apache/doris/pull/48867" target="_blank" rel="noopener noreferrer">#48867</a> <a href="https://github.com/apache/doris/pull/49165" target="_blank" rel="noopener noreferrer">#49165</a> <a href="https://github.com/apache/doris/pull/49193" target="_blank" rel="noopener noreferrer">#49193</a> <a href="https://github.com/apache/doris/pull/49350" target="_blank" rel="noopener noreferrer">#49350</a> <a href="https://github.com/apache/doris/pull/49710" target="_blank" rel="noopener noreferrer">#49710</a> <a href="https://github.com/apache/doris/pull/49825" target="_blank" rel="noopener noreferrer">#49825</a>)</li>
<li>Fixed untimely cleanup of completed transactions (<a href="https://github.com/apache/doris/pull/49564" target="_blank" rel="noopener noreferrer">#49564</a>)</li>
<li>Changed JSONB default value to <code>{}</code> for partial column updates (<a href="https://github.com/apache/doris/pull/49066" target="_blank" rel="noopener noreferrer">#49066</a>)</li>
<li>Fixed delete bitmap update lock release issue in Storage-Compute Separation model (<a href="https://github.com/apache/doris/pull/47766" target="_blank" rel="noopener noreferrer">#47766</a>)</li>
<li>Fixed data loss in Stream Load on ARM architecture (<a href="https://github.com/apache/doris/pull/49666" target="_blank" rel="noopener noreferrer">#49666</a>)</li>
<li>Fixed missing error URL return for data quality issues in Insert Into Select (<a href="https://github.com/apache/doris/pull/49687" target="_blank" rel="noopener noreferrer">#49687</a>)</li>
<li>Fixed error URL reporting for multi-table Routine Load data quality issues (<a href="https://github.com/apache/doris/pull/49130" target="_blank" rel="noopener noreferrer">#49130</a>)</li>
<li>Fixed incorrect results when using Insert Into Values during Schema Change (<a href="https://github.com/apache/doris/pull/49338" target="_blank" rel="noopener noreferrer">#49338</a>)</li>
<li>Fixed core dump caused by tablet commit info reporting (<a href="https://github.com/apache/doris/pull/48732" target="_blank" rel="noopener noreferrer">#48732</a>)</li>
<li>Added Azure China region support for S3 Load (<a href="https://github.com/apache/doris/pull/48642" target="_blank" rel="noopener noreferrer">#48642</a>)</li>
<li>Fixed &quot;get image failed&quot; error in K8s environment (<a href="https://github.com/apache/doris/pull/49072" target="_blank" rel="noopener noreferrer">#49072</a>)</li>
<li>Reduced CPU consumption in dynamic partition scheduling (<a href="https://github.com/apache/doris/pull/48577" target="_blank" rel="noopener noreferrer">#48577</a>)</li>
<li>Fixed column exception after materialized view renaming (<a href="https://github.com/apache/doris/pull/48328" target="_blank" rel="noopener noreferrer">#48328</a>)</li>
<li>Fixed memory and file cache leakage after failed Schema Change (<a href="https://github.com/apache/doris/pull/48426" target="_blank" rel="noopener noreferrer">#48426</a>)</li>
<li>Fixed base compaction failure for tables with empty partitions (<a href="https://github.com/apache/doris/pull/49062" target="_blank" rel="noopener noreferrer">#49062</a>)</li>
<li>Fixed data correctness issues in complex type modifications (<a href="https://github.com/apache/doris/pull/49452" target="_blank" rel="noopener noreferrer">#49452</a>)</li>
<li>Fixed core dump in cold compaction (<a href="https://github.com/apache/doris/pull/48329" target="_blank" rel="noopener noreferrer">#48329</a>)</li>
<li>Fixed cumulative point stagnation with delete operations (<a href="https://github.com/apache/doris/pull/47282" target="_blank" rel="noopener noreferrer">#47282</a>)</li>
<li>Fixed memory insufficiency in large-scale full compaction (<a href="https://github.com/apache/doris/pull/48958" target="_blank" rel="noopener noreferrer">#48958</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled-1">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.5/#compute-storage-decoupled-1" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>Fixed file cache cleanup failure in K8s environment (<a href="https://github.com/apache/doris/pull/49199" target="_blank" rel="noopener noreferrer">#49199</a>)</li>
<li>Fixed FE CPU spike caused by read-write locks during high-frequency ingestion (<a href="https://github.com/apache/doris/pull/48564" target="_blank" rel="noopener noreferrer">#48564</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-2">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.5/#lakehouse-2" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<p><strong>Data Lakes</strong></p>
<ul>
<li>Fixed BE core dump during concurrent writes to Hive/Iceberg tables (<a href="https://github.com/apache/doris/pull/49842" target="_blank" rel="noopener noreferrer">#49842</a>)</li>
<li>Fixed write failures to Hive/Iceberg tables on AWS S3 (<a href="https://github.com/apache/doris/pull/47162" target="_blank" rel="noopener noreferrer">#47162</a>)</li>
<li>Fixed incorrect Iceberg Position Deletion reads (<a href="https://github.com/apache/doris/pull/47977" target="_blank" rel="noopener noreferrer">#47977</a>)</li>
<li>Added Tencent Cloud COS support for Iceberg table creation (<a href="https://github.com/apache/doris/pull/49885" target="_blank" rel="noopener noreferrer">#49885</a>)</li>
<li>Fixed Kerberos authentication for Paimon data on HDFS (<a href="https://github.com/apache/doris/pull/47192" target="_blank" rel="noopener noreferrer">#47192</a>)</li>
<li>Fixed memory leak in Hudi Jni Scanner (<a href="https://github.com/apache/doris/pull/48955" target="_blank" rel="noopener noreferrer">#48955</a>)</li>
<li>Fixed multi-partition list reading in MaxCompute Catalog (<a href="https://github.com/apache/doris/pull/48325" target="_blank" rel="noopener noreferrer">#48325</a>)</li>
</ul>
<p><strong>JDBC</strong></p>
<ul>
<li>Fixed NPE when fetching row count from JDBC Catalog (<a href="https://github.com/apache/doris/pull/49442" target="_blank" rel="noopener noreferrer">#49442</a>)</li>
<li>Fixed OceanBase Oracle mode connection test (<a href="https://github.com/apache/doris/pull/49442" target="_blank" rel="noopener noreferrer">#49442</a>)</li>
<li>Fixed column type length inconsistency in concurrent JDBC Catalog access (<a href="https://github.com/apache/doris/pull/48541" target="_blank" rel="noopener noreferrer">#48541</a>)</li>
<li>Fixed Classloader leak in JDBC Catalog BE (<a href="https://github.com/apache/doris/pull/46912" target="_blank" rel="noopener noreferrer">#46912</a>)</li>
<li>Fixed connection thread leak in PostgreSQL JDBC Catalog (<a href="https://github.com/apache/doris/pull/49568" target="_blank" rel="noopener noreferrer">#49568</a>)</li>
</ul>
<p><strong>Export</strong></p>
<ul>
<li>Fixed EXPORT job stuck in EXPORTING state (<a href="https://github.com/apache/doris/pull/47974" target="_blank" rel="noopener noreferrer">#47974</a>)</li>
<li>Disabled OUTFILE auto-retry to prevent duplicate files (<a href="https://github.com/apache/doris/pull/48095" target="_blank" rel="noopener noreferrer">#48095</a>)</li>
</ul>
<p><strong>Others</strong></p>
<ul>
<li>Fixed NPE when executing TVF queries via FE WebUI (<a href="https://github.com/apache/doris/pull/49213" target="_blank" rel="noopener noreferrer">#49213</a>)</li>
<li>Fixed Hadoop Libhdfs thread local null pointer exception (<a href="https://github.com/apache/doris/pull/48280" target="_blank" rel="noopener noreferrer">#48280</a>)</li>
<li>Fixed &quot;Filesystem already closed&quot; error in FE Hadoop access (<a href="https://github.com/apache/doris/pull/48351" target="_blank" rel="noopener noreferrer">#48351</a>)</li>
<li>Fixed Catalog comment persistence issue (<a href="https://github.com/apache/doris/pull/46946" target="_blank" rel="noopener noreferrer">#46946</a>)</li>
<li>Fixed Parquet complex type reading errors (<a href="https://github.com/apache/doris/pull/47734" target="_blank" rel="noopener noreferrer">#47734</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views-1">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.5/#asynchronous-materialized-views-1" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Fixed slow MV construction in extreme scenarios (<a href="https://github.com/apache/doris/pull/48074" target="_blank" rel="noopener noreferrer">#48074</a>)</li>
<li>Fixed nested MV transparent rewrite failure (<a href="https://github.com/apache/doris/pull/48222" target="_blank" rel="noopener noreferrer">#48222</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.5/#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Fixed constant folding calculation errors (<a href="https://github.com/apache/doris/pull/49225" target="_blank" rel="noopener noreferrer">#49225</a> <a href="https://github.com/apache/doris/pull/47966" target="_blank" rel="noopener noreferrer">#47966</a> <a href="https://github.com/apache/doris/pull/49416" target="_blank" rel="noopener noreferrer">#49416</a> <a href="https://github.com/apache/doris/pull/49087" target="_blank" rel="noopener noreferrer">#49087</a> <a href="https://github.com/apache/doris/pull/49033" target="_blank" rel="noopener noreferrer">#49033</a> <a href="https://github.com/apache/doris/pull/49061" target="_blank" rel="noopener noreferrer">#49061</a> <a href="https://github.com/apache/doris/pull/48895" target="_blank" rel="noopener noreferrer">#48895</a> <a href="https://github.com/apache/doris/pull/48957" target="_blank" rel="noopener noreferrer">#48957</a> <a href="https://github.com/apache/doris/pull/47288" target="_blank" rel="noopener noreferrer">#47288</a> <a href="https://github.com/apache/doris/pull/48641" target="_blank" rel="noopener noreferrer">#48641</a> <a href="https://github.com/apache/doris/pull/49413" target="_blank" rel="noopener noreferrer">#49413</a> <a href="https://github.com/apache/doris/pull/48783" target="_blank" rel="noopener noreferrer">#48783</a>)</li>
<li>Fixed unexpected errors with ORDER BY in nested window functions (<a href="https://github.com/apache/doris/pull/48492" target="_blank" rel="noopener noreferrer">#48492</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-1">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.5/#query-execution-1" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Fixed pipeline task scheduling deadlocks/performance issues (<a href="https://github.com/apache/doris/pull/49976" target="_blank" rel="noopener noreferrer">#49976</a> <a href="https://github.com/apache/doris/pull/49007" target="_blank" rel="noopener noreferrer">#49007</a>)</li>
<li>Fixed memory corruption on FE connection failure (<a href="https://github.com/apache/doris/pull/48370" target="_blank" rel="noopener noreferrer">#48370</a> <a href="https://github.com/apache/doris/pull/48313" target="_blank" rel="noopener noreferrer">#48313</a>)</li>
<li>Fixed memory corruption with lambda and array functions (<a href="https://github.com/apache/doris/pull/49140" target="_blank" rel="noopener noreferrer">#49140</a>)</li>
<li>Fixed BE core caused by null string-to-JSONB conversion (<a href="https://github.com/apache/doris/pull/49810" target="_blank" rel="noopener noreferrer">#49810</a>)</li>
<li>Standardized undefined behaviors in <code>parse_url</code> (<a href="https://github.com/apache/doris/pull/49149" target="_blank" rel="noopener noreferrer">#49149</a>)</li>
<li>Fixed <code>array_overlap</code> null handling (<a href="https://github.com/apache/doris/pull/49403" target="_blank" rel="noopener noreferrer">#49403</a>)</li>
<li>Fixed case conversion errors for non-ASCII characters (<a href="https://github.com/apache/doris/pull/49763" target="_blank" rel="noopener noreferrer">#49763</a>)</li>
<li>Fixed BE core in <code>percentile</code> function (<a href="https://github.com/apache/doris/pull/48563" target="_blank" rel="noopener noreferrer">#48563</a>)</li>
<li>Fixed multiple memory corruption issues (<a href="https://github.com/apache/doris/pull/48288" target="_blank" rel="noopener noreferrer">#48288</a> <a href="https://github.com/apache/doris/pull/49737" target="_blank" rel="noopener noreferrer">#49737</a> <a href="https://github.com/apache/doris/pull/48018" target="_blank" rel="noopener noreferrer">#48018</a> <a href="https://github.com/apache/doris/pull/47964" target="_blank" rel="noopener noreferrer">#47964</a>)</li>
<li>Fixed incorrect SET operator results (<a href="https://github.com/apache/doris/pull/48001" target="_blank" rel="noopener noreferrer">#48001</a>)</li>
<li>Reduced default Arrow Flight thread pool size to prevent FD exhaustion (<a href="https://github.com/apache/doris/pull/48530" target="_blank" rel="noopener noreferrer">#48530</a>)</li>
<li>Fixed window function memory corruption (<a href="https://github.com/apache/doris/pull/48458" target="_blank" rel="noopener noreferrer">#48458</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management-1">Semi-structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.5/#semi-structured-data-management-1" class="hash-link" aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">&#x200B;</a></h3>
<ul>
<li>Fixed chunked Stream Load JSON import (<a href="https://github.com/apache/doris/pull/48474" target="_blank" rel="noopener noreferrer">#48474</a>)</li>
<li>Enhanced JSONB format validation (<a href="https://github.com/apache/doris/pull/48731" target="_blank" rel="noopener noreferrer">#48731</a>)</li>
<li>Fixed crash with large STRUCT fields (<a href="https://github.com/apache/doris/pull/49552" target="_blank" rel="noopener noreferrer">#49552</a>)</li>
<li>Extended VARCHAR length support in complex types (<a href="https://github.com/apache/doris/pull/48025" target="_blank" rel="noopener noreferrer">#48025</a>)</li>
<li>Fixed <code>array_avg</code> crash with specific parameters (<a href="https://github.com/apache/doris/pull/48691" target="_blank" rel="noopener noreferrer">#48691</a>)</li>
<li>Fixed <code>ColumnObject::pop_back</code> crash in VARIANT type (<a href="https://github.com/apache/doris/pull/48935" target="_blank" rel="noopener noreferrer">#48935</a> <a href="https://github.com/apache/doris/pull/48978" target="_blank" rel="noopener noreferrer">#48978</a>)</li>
<li>Disabled index building on VARIANT type (<a href="https://github.com/apache/doris/pull/49844" target="_blank" rel="noopener noreferrer">#49844</a>)</li>
<li>Disabled inverted index v1 format for VARIANT type (<a href="https://github.com/apache/doris/pull/49890" target="_blank" rel="noopener noreferrer">#49890</a>)</li>
<li>Fixed multi-layer CAST errors in VARIANT type (<a href="https://github.com/apache/doris/pull/47954" target="_blank" rel="noopener noreferrer">#47954</a>)</li>
<li>Optimized inverted index metadata lookup for VARIANT with many subcolumns (<a href="https://github.com/apache/doris/pull/48153" target="_blank" rel="noopener noreferrer">#48153</a>)</li>
<li>Reduced VARIANT schema memory consumption in Storage-Compute Separation mode (<a href="https://github.com/apache/doris/pull/47629" target="_blank" rel="noopener noreferrer">#47629</a> <a href="https://github.com/apache/doris/pull/48463" target="_blank" rel="noopener noreferrer">#48463</a>)</li>
<li>Fixed PreparedStatement ID overflow (<a href="https://github.com/apache/doris/pull/48116" target="_blank" rel="noopener noreferrer">#48116</a>)</li>
<li>Fixed row storage with DELETE operations (<a href="https://github.com/apache/doris/pull/49609" target="_blank" rel="noopener noreferrer">#49609</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="inverted-index">Inverted Index<a href="https://doris.apache.org/blog/release-note-3.0.5/#inverted-index" class="hash-link" aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">&#x200B;</a></h3>
<ul>
<li>Fixed ARRAY type null bitmap handling (<a href="https://github.com/apache/doris/pull/48052" target="_blank" rel="noopener noreferrer">#48052</a>)</li>
<li>Fixed Date/Datetimev1 Bloomfilter comparison (<a href="https://github.com/apache/doris/pull/47005" target="_blank" rel="noopener noreferrer">#47005</a>)</li>
<li>Fixed UTF-8 4-byte character truncation (<a href="https://github.com/apache/doris/pull/48792" target="_blank" rel="noopener noreferrer">#48792</a>)</li>
<li>Fixed index loss after immediate column addition (<a href="https://github.com/apache/doris/pull/48547" target="_blank" rel="noopener noreferrer">#48547</a>)</li>
<li>Fixed empty data handling in ARRAY inverted index (<a href="https://github.com/apache/doris/pull/48264" target="_blank" rel="noopener noreferrer">#48264</a>)</li>
<li>Improved FE metadata upgrade compatibility (<a href="https://github.com/apache/doris/pull/49283" target="_blank" rel="noopener noreferrer">#49283</a>)</li>
<li>Fixed <code>match_phrase_prefix</code> cache error (<a href="https://github.com/apache/doris/pull/46517" target="_blank" rel="noopener noreferrer">#46517</a>)</li>
<li>Fixed file cache cleanup after compaction (<a href="https://github.com/apache/doris/pull/49738" target="_blank" rel="noopener noreferrer">#49738</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="security-1">Security<a href="https://doris.apache.org/blog/release-note-3.0.5/#security-1" class="hash-link" aria-label="Direct link to Security" title="Direct link to Security">&#x200B;</a></h3>
<ul>
<li>Removed Select_Priv check for DELETE operations (<a href="https://github.com/apache/doris/pull/49239" target="_blank" rel="noopener noreferrer">#49239</a>)</li>
<li>Prevented non-root users from modifying root privileges (<a href="https://github.com/apache/doris/pull/48752" target="_blank" rel="noopener noreferrer">#48752</a>)</li>
<li>Fixed intermittent LDAP PartialResultException (<a href="https://github.com/apache/doris/pull/47858" target="_blank" rel="noopener noreferrer">#47858</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others-1">Others<a href="https://doris.apache.org/blog/release-note-3.0.5/#others-1" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Fixed JAVA_OPTS_FOR_JDK_17 recognition (<a href="https://github.com/apache/doris/pull/48170" target="_blank" rel="noopener noreferrer">#48170</a>)</li>
<li>Fixed BDB metadata write failure caused by InterruptException (<a href="https://github.com/apache/doris/pull/47874" target="_blank" rel="noopener noreferrer">#47874</a>)</li>
<li>Improved SQL hash generation for multi-statement requests (<a href="https://github.com/apache/doris/pull/48242" target="_blank" rel="noopener noreferrer">#48242</a>)</li>
<li>User attribute variables now override session variables (<a href="https://github.com/apache/doris/pull/48548" target="_blank" rel="noopener noreferrer">#48548</a>)</li>
</ul></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[How Tencent Music saved 80% in costs by migrating from Elasticsearch to Apache Doris]]></title>
            <link>https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris/</link>
            <guid>https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris/</guid>
            <pubDate>Thu, 17 Apr 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Handle full-text search, audience segmentation, and aggregation analysis directly within Apache Doris and slash their storage costs by 80% while boosting write performance by 4x]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Best Practice</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">How Tencent Music saved 80% in costs by migrating from Elasticsearch to Apache Doris</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">velodb.io &#xB7; VeloDB Engineering Team</span></span><time datetime="2025-04-17T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">April 17, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>As a long-time user of Apache Doris, Tencent Music Entertainment (NYSE: TME) has undergone four generations of data platform evolution, with the Doris community actively supporting its transformation. From <a href="https://doris.apache.org/blog/Tencent-Data-Engineers-Why-We-Went-from-ClickHouse-to-Apache-Doris" target="_blank" rel="noopener noreferrer">replacing ClickHouse as the analytical engine</a> to gradually offloading Elasticsearch&apos;s functionalities, TME has now taken a big step&#x2014;fully replacing Elasticsearch with Doris as its unified search engine. They can handle <strong>full-text search</strong>, <strong>audience segmentation</strong>, and <strong>aggregation analysis</strong> directly within Doris. By combining their self-developed SuperSonic with <strong>AI-powered</strong> <strong>natural language processing</strong>, they can perform data analytics through simple, conversational queries. The shift from Elasticsearch to Apache Doris has slashed their storage costs by 80% while boosting write performance by 4x. In this article, we dive into TME&apos;s journey, uncovering key insights that can serve as a blueprint for others navigating similar transitions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-they-do">What they do<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris/#what-they-do" class="hash-link" aria-label="Direct link to What they do" title="Direct link to What they do">&#x200B;</a></h2>
<p>The TME content library provides two types of functionality:</p>
<ul>
<li><strong>Search</strong>: Quickly locate artists, songs, and other textual data based on flexible query conditions.</li>
<li><strong>Tag-based segmentation</strong>: Filter data based on specific tags and criteria among billions of records and deliver sub-second query responses</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-hybrid-solution-elasticsearch--apache-doris">A hybrid solution: Elasticsearch + Apache Doris<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris/#a-hybrid-solution-elasticsearch--apache-doris" class="hash-link" aria-label="Direct link to A hybrid solution: Elasticsearch + Apache Doris" title="Direct link to A hybrid solution: Elasticsearch + Apache Doris">&#x200B;</a></h2>
<p>TME previously used both Elasticsearch and Apache Doris in its content library platform to leverage the strengths from both:</p>
<ul>
<li><strong>Elasticsearch</strong> excelled in full-text search. It can quickly match specific keywords or phrases using inverted indexing while supporting indexing of all fields and flexible filtering conditions. However, it struggled with data aggregation, lacked support for complex queries like JOINs, and had high storage overhead.</li>
<li><strong>Apache Doris</strong> offered efficient OLAP capabilities for complex analytical queries while optimizing storage through high compression rates, but before the release of Apache Doris 2.0, it had limited search capabilities due to the absence of inverted index.</li>
</ul>
<p>That&apos;s why TME built a hybrid architecture. In this setup, Elasticsearch handled full-text search and tag-based segmentation, while Apache Doris powered OLAP analytics. With Doris&apos; <a href="https://doris.apache.org/docs/lakehouse/database/es" target="_blank" rel="noopener noreferrer">Elasticsearch catalog</a>, data in Elasticsearch can be queried directly through Doris, creating a unified query interface for seamless data retrieval.</p>
<p><img decoding="async" loading="lazy" alt="A hybrid solution: Elasticsearch + Apache Doris" src="https://doris.apache.org/assets/images/a-hybrid-solution-Elasticsearch-and-Apache-Doris-4f791f51b90b53347d067f6bdcc5ea42.png" width="1280" height="653" class="img_ev3q"></p>
<p>Despite the advantages of the hybrid architecture, TME encountered several challenges during its implementation:</p>
<ul>
<li><strong>High storage costs</strong>: Elasticsearch continued to consume huge storage space.</li>
<li><strong>Write performance bottlenecks</strong>: As data volumes grew, the write pressure on the Elasticsearch cluster intensified. Full data writes were taking over 10 hours, nearing the business&apos;s operational limits.</li>
<li><strong>Architectural complexity</strong>: The multi-component architecture meant complex maintenance, extra costs due to redundant data storage, and higher risk of data inconsistency.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-unified-solution-based-on-apache-doris">A unified solution based on Apache Doris<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris/#a-unified-solution-based-on-apache-doris" class="hash-link" aria-label="Direct link to A unified solution based on Apache Doris" title="Direct link to A unified solution based on Apache Doris">&#x200B;</a></h2>
<p>In <a href="https://doris.apache.org/blog/release-note-2.0.0" target="_blank" rel="noopener noreferrer">version 2.0</a>, Apache Doris introduced inverted index and started to support full-text search. This release drove TME to consider entrusting Doris with the full scope of full-text search, tag-based segmentation, and aggregation analysis tasks.</p>
<p>What enables Doris to fully replace Elasticsearch?</p>
<ul>
<li>In terms of <strong>full-text search</strong>, Doris accelerates standard equality and range queries (<code>=</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>) and supports comprehensive text field searches, including tokenization for English, Chinese and Unicode, multi-keyword searches (<code>MATCH_ANY</code>, <code>MATCH_ALL</code>), phrase searches (<code>MATCH_PHRASE</code>, <code>MATCH_PHRASE_PREFIX</code>, <code>MATCH_PHRASE_REGEXP</code>), slop in phrase, and multi-field searches (<code>MULTI_MATCH</code>). It improves performance by orders of magnitude compared to traditional databases using <code>LIKE</code>-based fuzzy matching.</li>
<li>As for <strong>inverted index</strong>, Doris implements it directly within the database kernel. Inverted indexing in Doris is seamlessly integrated with SQL syntax and supports any logical combinations for <code>AND</code>, <code>OR</code>, and <code>NOT</code> operations, so it allows for complex filtering and search queries. This is an example query involving five filtering conditions: full-text (<code>title MATCH &apos;love&apos; OR description MATCH_PHRASE &apos;true love&apos;</code>), date range filtering (<code>dt BETWEEN &apos;2024-09-10 00:00:00&apos; AND &apos;2024-09-10 23:59:59&apos;</code>), numeric range filtering (<code>rating &gt; 4</code>), and equality check on strings (<code>country = &apos;Canada&apos;</code>). These conditions are combined into a single SQL query, after which results are grouped by <code>actor</code> and sorted by the highest count.</li>
</ul>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> actor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> cnt </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> table1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> dt </span><span class="token operator">BETWEEN</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-09-10 00:00:00&apos;</span><span class="token plain"> </span><span class="token operator">AND</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-09-10 23:59:59&apos;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">AND</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">title </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">MATCH</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;love&apos;</span><span class="token plain"> </span><span class="token operator">OR</span><span class="token plain"> description MATCH_PHRASE </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;true love&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">AND</span><span class="token plain"> rating </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">AND</span><span class="token plain"> country </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;Canada&apos;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> actor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> cnt </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DESC</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">LIMIT</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>This is the data platform after TME transitioned from a hybrid Elasticsearch + Doris architecture to a unified Doris solution.</p>
<p><img decoding="async" loading="lazy" alt="A unified solution based on Apache Doris" src="https://doris.apache.org/assets/images/a-unified-solution-based-on-Apache-Doris-f85938ee550bcb327fe58f23a1b49c7c.png" width="1280" height="695" class="img_ev3q"></p>
<p>With this upgrade, users can now experience:</p>
<ul>
<li><strong>A big cost reduction</strong>: Doris now handles both search and analytical workloads, leading to an <strong>80%</strong> reduction in operational costs. For example, a single business&apos; daily full data previously required 697.7 GB in Elasticsearch but now only takes 195.4 GB in Doris.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="A big cost reduction" src="https://doris.apache.org/assets/images/A-big-cost-reduction-74dd64360e6aef6ae731fe336b17cc08.png" width="1239" height="1126" class="img_ev3q"></p>
<ul>
<li><strong>Improved performance</strong>: Data ingestion time was cut down from over 10 hours to under 3 hours, making Doris&apos; write performance <strong>4x faster than Elasticsearch</strong>. Additionally, Doris supports complex custom tag-based queries, enabling previously impractical analytics and significantly enhancing user experience.</li>
<li><strong>Simplified architecture</strong>: With a unified Doris-based architecture, TME now maintains a single technology stack and eliminates data inconsistency issues</li>
</ul>
<p>The transition to a Doris-only architecture required several key design optimizations. In the following sections, we&apos;ll dive deeper into the technical strategies and lessons learned from this migration.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-game-changer-inverted-index">The game changer: Inverted Index<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris/#the-game-changer-inverted-index" class="hash-link" aria-label="Direct link to The game changer: Inverted Index" title="Direct link to The game changer: Inverted Index">&#x200B;</a></h3>
<p>To optimize storage, TME adopts a dimension table + fact table model to efficiently handle search and analytics workloads:</p>
<ul>
<li><strong>Dimension table</strong>: Built using the <a href="https://doris.apache.org/docs/3.0/table-design/data-model/unique" target="_blank" rel="noopener noreferrer">Primary Key model</a>, dimension tables are can be easily updated via the partial column update feature of Doris. These tables are meant for both searching and tag-based segmentation.</li>
<li><strong>Fact table</strong>: Designed with the <a href="https://doris.apache.org/docs/3.0/table-design/data-model/aggregate" target="_blank" rel="noopener noreferrer">Aggregate model</a>, this table stores daily metric data. Given the high data volume and the independence of daily datasets, a new <a href="https://doris.apache.org/docs/3.0/table-design/data-partitioning/data-distribution#partitioning-strategy" target="_blank" rel="noopener noreferrer">partition</a> is created every day to enhance query performance and manageability.</li>
</ul>
<p>To ensure a seamless transition from Elasticsearch to Apache Doris, TME designs the table schemas and indexes based on Doris&apos; inverted index <a href="https://doris.apache.org/docs/3.0/table-design/index/inverted-index" target="_blank" rel="noopener noreferrer">docs</a>. The mapping follows these key principles:</p>
<ul>
<li>Elasticsearch&apos;s <code>Keyword</code> type maps to Doris&apos; <code>Varchar</code>/<code>String</code> type with non-tokenized inverted indexing (<code>USING INVERTED</code>).</li>
<li>Elasticsearch&apos;s <code>Text</code> type maps to Doris&apos; <code>Varchar</code>/<code>String</code> type with tokenized inverted indexing (<code>USING INVERTED PROPERTIES(&quot;parser&quot; = &quot;english/unicode&quot;)</code>).</li>
</ul>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">tag_baike_zipper_track_dim_string</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">dayno</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">date</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;date&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;id&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">a4</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">65000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;song_name&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">a43</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">65000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;zyqk_singer_id&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INDEX</span><span class="token plain"> idx_a4 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">a4</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">USING</span><span class="token plain"> INVERTED PROPERTIES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;parser&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;unicode&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;support_phrase&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INDEX</span><span class="token plain"> idx_a43 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">a43</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">USING</span><span class="token plain"> INVERTED PROPERTIES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;parser&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;english&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;&apos;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ENGINE</span><span class="token operator">=</span><span class="token plain">OLAP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">dayno</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;OLAP&apos;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">dayno</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p99991230 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;9999-12-30&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;9999-12-31&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS auto</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p><strong>Before enabling inverted index in Doris:</strong></p>
<p>Take the following complex query as an example: Without inverted indexing, it was slow and took minutes to return results.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">-- like (Low performance):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain">  </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> db_tag_pro</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tag_track_pro_3  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dayno</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-08-01&apos;</span><span class="token plain"> </span><span class="token operator">AND</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> concat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">a4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">like</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;%#I&apos;</span><span class="token plain">m so busy dancing</span><span class="token comment" style="color:rgb(98, 114, 164)">#%&apos; </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">or</span><span class="token plain"> concat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">a43</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">like</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;%#1000#%&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- explode (Low performance and often triggers ERROR 1105 (HY000)):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> tab1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">a4_single</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">a43_single </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> db_tag_pro</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tag_track_pro_3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> dayno</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-08-01&apos;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tab1 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> lateral </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">view</span><span class="token plain"> explode_split</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">a4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tmp1 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> a4_single</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> lateral </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">view</span><span class="token plain"> explode_split</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">a43</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tmp2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> a43_single</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tab2 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> a4_single</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;I&apos;</span><span class="token plain">m so busy dancing</span><span class="token string" style="color:rgb(255, 121, 198)">&apos; or a43_single=&apos;</span><span class="token number">1000</span><span class="token plain">&apos;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p><strong>After enabling inverted index in Doris:</strong></p>
<p>The query response times reduces <strong>from minutes to just seconds</strong>. A tip is to set <code>store_row_column</code> to enable row-based storage. This optimizes <code>select*</code> queries that reads all columns from a table.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">-- Retrieve the corresponding ID from the dimension table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain">  id </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> db_tag_pro</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tag_baike_zipper_track_dim_string  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> a4 MATCH_PHRASE </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;I&apos;</span><span class="token plain">m so busy dancing</span><span class="token string" style="color:rgb(255, 121, 198)">&apos; OR a43 MATCH_ALL &apos;</span><span class="token number">1000</span><span class="token string" style="color:rgb(255, 121, 198)">&apos; )  AND  dayno =&apos;</span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain">&apos;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- Fetch the detailed data from the fact table based on the ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> db_tag_pro</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tag_baike_track_pro  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain">  id </span><span class="token operator">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token number">563559286</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>Moreover, Apache Doris overcomes a key limitation found in Elasticsearch&#x2014;<strong>handling overly long SQL queries that previously failed due to length constraints</strong>. Doris supports longer and more complex queries with ease. Additionally, using Doris as the unified engine means that users can leverage materialized views and BITMAP data type to further optimize intermediate query results. This eliminates the need for cross-engine synchronization.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multi-service-resource-isolation">Multi-service resource isolation<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris/#multi-service-resource-isolation" class="hash-link" aria-label="Direct link to Multi-service resource isolation" title="Direct link to Multi-service resource isolation">&#x200B;</a></h3>
<p>To ensure a cost-effective and seamless user experience, TME leverages Doris&apos; resource isolation mechanism for efficient workload management across different business scenarios.</p>
<ul>
<li><strong>Layer 1: Physical isolation (Resource Group)</strong> They divide the cluster into two Resource Groups to serve difference workloads: Core and Normal. The Core group is dedicated to mission-critical tasks such as content search and tag-based segmentation, while the Normal group handles general-purpose queries. This node-level physical isolation ensures that high-priority operations remain unaffected by other workloads.</li>
<li><strong>Layer 2: Logical isolation (Workload Group)</strong> Within each physically isolated Resource Group, resources are further divided into Workload Groups. For example, TME creates multiple Workload Groups within the Normal resource group, and assign a default Workload Group to each user. In this way, they prevent any single user from monopolizing cluster resources.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Multi-service resource isolation" src="https://doris.apache.org/assets/images/Multi-service-resource-isolation-68396dfd1f3cc91a8b806c4323878ffb.png" width="1280" height="736" class="img_ev3q"></p>
<p>These resource isolation mechanisms improve system stability. <strong>In TME&apos;s case, the frequency of alerts has reduced from over 20 times per day to single digits per month</strong>. The team can now focus more on system optimization and performance improvements rather than constant firefighting.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-seamless-migration">A seamless migration<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris/#a-seamless-migration" class="hash-link" aria-label="Direct link to A seamless migration" title="Direct link to A seamless migration">&#x200B;</a></h2>
<p>TME implements the migration via their self-developed <a href="https://github.com/tencentmusic/supersonic" target="_blank" rel="noopener noreferrer">SuperSonic</a> project, which has a built-in Headless BI feature to simplify the process. All they need is to convert the queries written in Elasticsearch&apos;s Domain Specific Language (DSL) into SQL statements, and switch the data sources for pre-defined metrics and tags.</p>
<p>The idea of Headless BI is to decouple data modeling, management, and consumption. With it, business analysts can define metrics and tags directly on the Headless BI platform without worrying about the underlying data sources. Because Headless BI abstracts away differences between various data storage and analytics engines, users can experience a transparent, frictionless migration without disruptions.</p>
<p><img decoding="async" loading="lazy" alt="A seamless migration" src="https://doris.apache.org/assets/images/A-seamless-migration-eb346dbeb462247193fe25f764b7bad5.png" width="1280" height="739" class="img_ev3q"></p>
<p>The Headless BI enables seamless data source migration and largely simplifies data management and querying. SuperSonic takes this a step further by integrating Chat BI capabilities with Headless BI, so users can perform unified data governance and data analysis using natural language. Originally developed and battle-tested in-house by TME, the SuperSonic platform is now open source: <a href="https://github.com/tencentmusic/supersonic" target="_blank" rel="noopener noreferrer">https://github.com/tencentmusic/supersonic</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&apos;s next<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris/#whats-next" class="hash-link" aria-label="Direct link to What&apos;s next" title="Direct link to What&apos;s next">&#x200B;</a></h2>
<p>The migration from Elasticsearch to Apache Doris has yielded impressive gains. Write performance has improved 4x and storage usage has dropped by 72%, while the overall operational costs have been cut by up to 80%.</p>
<p>By replacing its Elasticsearch cluster with Doris, TME has unified its content library&apos;s search and analytics engines into a single, streamlined platform. The system now supports complex custom tag-based segmentation with sub-second response. The next-phase plan of TME is to explore broader use cases of Apache Doris and prepare to adopt the <a href="https://doris.apache.org/docs/3.0/compute-storage-decoupled/overview" target="_blank" rel="noopener noreferrer">compute-storage decoupled mode</a> to drive even greater cost efficiency.</p>
<p>For direct communication, real-world insights, and best practices, join <a href="https://apachedoriscommunity.slack.com/archives/C08CQKX20R5" target="_blank" rel="noopener noreferrer">#elasticsearch-to-doris</a> channel in the <a href="https://join.slack.com/t/apachedoriscommunity/shared_invite/zt-2gmq5o30h-455W226d79zP3L96ZhXIoQ" target="_blank" rel="noopener noreferrer">Apache Doris community</a>.</p></div>]]></content:encoded>
            <category>Best Practice</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 2.1.9 released]]></title>
            <link>https://doris.apache.org/blog/release-note-2.1.9/</link>
            <guid>https://doris.apache.org/blog/release-note-2.1.9/</guid>
            <pubDate>Thu, 03 Apr 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[This version features improved SQL hash calculation, enhanced query result accuracy, and new metrics for better storage management. It also resolves critical bugs across multiple areas, enhancing the data management experience.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 2.1.9 released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2025-04-03T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">April 3, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear Community, <strong>Apache Doris version 2.1.9 is now available</strong>, featuring improved SQLHash calculation, enhanced query results accuracy, and new metrics for better storage management. This update also resolves critical bugs across multiple areas for a more robust data management experience.</p>
<ul>
<li>
<p><a href="https://doris.apache.org/download" target="_blank" rel="noopener noreferrer">Quick Download</a></p>
</li>
<li>
<p><a href="https://github.com/apache/doris/releases/tag/2.1.9-rc02" target="_blank" rel="noopener noreferrer">GitHub Release</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavior-changes">Behavior Changes<a href="https://doris.apache.org/blog/release-note-2.1.9/#behavior-changes" class="hash-link" aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">&#x200B;</a></h2>
<ul>
<li>The SQLHash in Audit Log is now accurately calculated per SQL query, resolving the issue of identical hashes in a single request. <a href="https://github.com/apache/doris/pull/48242" target="_blank" rel="noopener noreferrer">#48242</a></li>
<li>Query results match ColumnLabelName exactly. <a href="https://github.com/apache/doris/pull/47093" target="_blank" rel="noopener noreferrer">#47093</a></li>
<li>User property variables now take precedence over session variables. <a href="https://github.com/apache/doris/pull/47185" target="_blank" rel="noopener noreferrer">#47185</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="https://doris.apache.org/blog/release-note-2.1.9/#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.9/#storage-management" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>Disallow renaming partition columns. <a href="https://github.com/apache/doris/pull/47596" target="_blank" rel="noopener noreferrer">#47596</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="https://doris.apache.org/blog/release-note-2.1.9/#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Added FE monitoring metrics for Catalogs, Databases, and Tables counts. <a href="https://github.com/apache/doris/pull/47891" target="_blank" rel="noopener noreferrer">#47891</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-2.1.9/#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="inverted-index">Inverted Index<a href="https://doris.apache.org/blog/release-note-2.1.9/#inverted-index" class="hash-link" aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">&#x200B;</a></h3>
<ul>
<li>Support for ARRAY type in VARIANT inverted indexes. <a href="https://github.com/apache/doris/pull/47688" target="_blank" rel="noopener noreferrer">#47688</a></li>
<li>Profile now shows performance metrics for each filter condition. <a href="https://github.com/apache/doris/pull/47504" target="_blank" rel="noopener noreferrer">#47504</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-2.1.9/#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Support for using <code>SELECT *</code> in aggregate queries with only aggregation key columns. <a href="https://github.com/apache/doris/pull/48006" target="_blank" rel="noopener noreferrer">#48006</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management-1">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.9/#storage-management-1" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>Enhanced CCR for binlog recycling and small file transfer efficiency, and robustness in chaotic environments. <a href="https://github.com/apache/doris/pull/47547" target="_blank" rel="noopener noreferrer">#47547</a> <a href="https://github.com/apache/doris/pull/47313" target="_blank" rel="noopener noreferrer">#47313</a> <a href="https://github.com/apache/doris/pull/45061" target="_blank" rel="noopener noreferrer">#45061</a></li>
<li>Enhanced import error messages to be more specific. <a href="https://github.com/apache/doris/pull/47918" target="_blank" rel="noopener noreferrer">#47918</a> <a href="https://github.com/apache/doris/pull/47470" target="_blank" rel="noopener noreferrer">#47470</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-note-2.1.9/#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.9/#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Fixed BE krb5.conf path configuration issue. <a href="https://github.com/apache/doris/pull/47679" target="_blank" rel="noopener noreferrer">#47679</a></li>
<li>Prevented <code>SELECT OUTFILE</code> statement retries to avoid duplicate data export. <a href="https://github.com/apache/doris/pull/48095" target="_blank" rel="noopener noreferrer">#48095</a></li>
<li>Fixed JAVA API access to Paimon tables. <a href="https://github.com/apache/doris/pull/47192" target="_blank" rel="noopener noreferrer">#47192</a></li>
<li>Resolved writing to Hive tables with <code>s3a://</code> storage location. <a href="https://github.com/apache/doris/pull/47162" target="_blank" rel="noopener noreferrer">#47162</a></li>
<li>Fixed the issue of Catalog&apos;s Comment field not being persisted. <a href="https://github.com/apache/doris/pull/46946" target="_blank" rel="noopener noreferrer">#46946</a></li>
<li>Addressed JDBC BE class loading leaks under certain conditions. <a href="https://github.com/apache/doris/pull/46912" target="_blank" rel="noopener noreferrer">#46912</a></li>
<li>Resolved high version ClickHouse JDBC Driver compatibility with JDBC Catalog. <a href="https://github.com/apache/doris/pull/46026" target="_blank" rel="noopener noreferrer">#46026</a></li>
<li>Fixed BE crash when reading Iceberg Position Delete. <a href="https://github.com/apache/doris/pull/47977" target="_blank" rel="noopener noreferrer">#47977</a></li>
<li>Corrected reading MaxCompute table data under multi-partition columns. <a href="https://github.com/apache/doris/pull/48325" target="_blank" rel="noopener noreferrer">#48325</a></li>
<li>Fixed reading Parquet complex column types errors. <a href="https://github.com/apache/doris/pull/47734" target="_blank" rel="noopener noreferrer">#47734</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="inverted-index-1">Inverted Index<a href="https://doris.apache.org/blog/release-note-2.1.9/#inverted-index-1" class="hash-link" aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">&#x200B;</a></h3>
<ul>
<li>Fixed ARRAY type inverted index null value handling. <a href="https://github.com/apache/doris/pull/48231" target="_blank" rel="noopener noreferrer">#48231</a></li>
<li>Resolved <code>BUILD INDEX</code> exception for newly added columns. <a href="https://github.com/apache/doris/pull/48389" target="_blank" rel="noopener noreferrer">#48389</a></li>
<li>Corrected UTF8 encoding index truncation issues leading to errors. <a href="https://github.com/apache/doris/pull/48657" target="_blank" rel="noopener noreferrer">#48657</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-types">Semi-structured Data Types<a href="https://doris.apache.org/blog/release-note-2.1.9/#semi-structured-data-types" class="hash-link" aria-label="Direct link to Semi-structured Data Types" title="Direct link to Semi-structured Data Types">&#x200B;</a></h3>
<ul>
<li>Fixed <code>array_agg</code> function crashes under special conditions. <a href="https://github.com/apache/doris/pull/46927" target="_blank" rel="noopener noreferrer">#46927</a></li>
<li>Resolved JSON import crashes due to incorrect chunk parameters. <a href="https://github.com/apache/doris/pull/48196" target="_blank" rel="noopener noreferrer">#48196</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-2.1.9/#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Fixed constant folding issues with nested time functions like <code>current_date</code>. <a href="https://github.com/apache/doris/pull/47288" target="_blank" rel="noopener noreferrer">#47288</a></li>
<li>Addressed non-deterministic function result errors. <a href="https://github.com/apache/doris/pull/48321" target="_blank" rel="noopener noreferrer">#48321</a></li>
<li>Resolved <code>CREATE TABLE LIKE</code> execution issues with on update column properties. <a href="https://github.com/apache/doris/pull/48007" target="_blank" rel="noopener noreferrer">#48007</a></li>
<li>Fixed unexpected planning errors for materialized views of aggregate model tables. <a href="https://github.com/apache/doris/pull/47658" target="_blank" rel="noopener noreferrer">#47658</a></li>
<li>Resolved <code>PreparedStatement</code> exceptions due to internal ID overflow. <a href="https://github.com/apache/doris/pull/47950" target="_blank" rel="noopener noreferrer">#47950</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-engine">Query Execution Engine<a href="https://doris.apache.org/blog/release-note-2.1.9/#query-execution-engine" class="hash-link" aria-label="Direct link to Query Execution Engine" title="Direct link to Query Execution Engine">&#x200B;</a></h3>
<ul>
<li>Resolved query hang or null pointer issues when querying system tables. <a href="https://github.com/apache/doris/pull/48370" target="_blank" rel="noopener noreferrer">#48370</a></li>
<li>Added DOUBLE type support for LEAD/LAG functions. <a href="https://github.com/apache/doris/pull/47940" target="_blank" rel="noopener noreferrer">#47940</a></li>
<li>Fixed query errors when <code>case when</code> conditions exceed 256. <a href="https://github.com/apache/doris/pull/47179" target="_blank" rel="noopener noreferrer">#47179</a></li>
<li>Corrected <code>str_to_date</code> function errors with spaces. <a href="https://github.com/apache/doris/pull/48920" target="_blank" rel="noopener noreferrer">#48920</a></li>
<li>Fixed <code>split_part</code> function errors during constant folding with <code>||</code>. <a href="https://github.com/apache/doris/pull/48910" target="_blank" rel="noopener noreferrer">#48910</a></li>
<li>Corrected <code>log</code> function result errors. <a href="https://github.com/apache/doris/pull/47228" target="_blank" rel="noopener noreferrer">#47228</a></li>
<li>Resolved core dump issues with <code>array</code> / <code>map</code> functions in lambda expressions. <a href="https://github.com/apache/doris/pull/49140" target="_blank" rel="noopener noreferrer">#49140</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management-2">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.9/#storage-management-2" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>Fixed memory corruption issues during import of aggregate tables. <a href="https://github.com/apache/doris/pull/47523" target="_blank" rel="noopener noreferrer">#47523</a></li>
<li>Resolved occasional core dump during MoW import under memory pressure. <a href="https://github.com/apache/doris/pull/47715" target="_blank" rel="noopener noreferrer">#47715</a></li>
<li>Fixed potential duplicate key issues with MoW during BE restart and schema change. <a href="https://github.com/apache/doris/pull/48056" target="_blank" rel="noopener noreferrer">#48056</a> <a href="https://github.com/apache/doris/pull/48775" target="_blank" rel="noopener noreferrer">#48775</a></li>
<li>Corrected group commit and global column update issues with memtable promotion. <a href="https://github.com/apache/doris/pull/48120" target="_blank" rel="noopener noreferrer">#48120</a> <a href="https://github.com/apache/doris/pull/47968" target="_blank" rel="noopener noreferrer">#47968</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permission-management">Permission Management<a href="https://doris.apache.org/blog/release-note-2.1.9/#permission-management" class="hash-link" aria-label="Direct link to Permission Management" title="Direct link to Permission Management">&#x200B;</a></h3>
<ul>
<li>No longer throws PartialResultException when using LDAP. <a href="https://github.com/apache/doris/pull/47858" target="_blank" rel="noopener noreferrer">#47858</a></li>
</ul></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Why Apache Doris is a Better Alternative to Elasticsearch for Real-Time Analytics]]></title>
            <link>https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/</link>
            <guid>https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/</guid>
            <pubDate>Tue, 25 Mar 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache Doris is a real-time data warehouse commonly used for observability, cyber security analysis, online reports, customer profiles, data lakehouse and more. Elasticsearch is more like a search engine, but it is also widely used for data analytics, so there's an overlap in their use cases. The comparison in this post will focus on the real-time analytics capabilities of Apache Doris and Elasticsearch from a user-oriented perspective]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Why Apache Doris is a Better Alternative to Elasticsearch for Real-Time Analytics</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Medium &#xB7; Kang, Apache Doris PMC Member</span></span><time datetime="2025-03-25T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">March 25, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>The author previously presented this topic at the VeloDB Webinar. This article expands on that presentation by providing more detailed comparative information, including test data and in-depth technical explanations: <a href="https://www.youtube.com/embed/qnxX-FOd8Wc?si=TcEF_w-XhqgQyP4A" target="_blank" rel="noopener noreferrer">https://www.youtube.com/embed/qnxX-FOd8Wc?si=TcEF_w-XhqgQyP4A</a></p>
<p>In the past year, there&apos;s an increasing number of users looking to use Apache Doris as an alternative to Elasticsearch, so I&apos;d like to provide an in-depth comparison of the two to serve as a reference for users.</p>
<p><a href="https://doris.apache.org/" target="_blank" rel="noopener noreferrer">Apache Doris</a> is a real-time data warehouse commonly used for observability, cyber security analysis, online reports, customer profiles, data lakehouse and more. <a href="https://www.elastic.co/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a> is more like a search engine, but it is also widely used for data analytics, so there&apos;s an overlap in their use cases. The comparison in this post will focus on the real-time analytics capabilities of Apache Doris and Elasticsearch from a user-oriented perspective:</p>
<ol>
<li><strong>Open source</strong></li>
<li><strong>System architecture</strong></li>
<li><strong>Real-time writes</strong></li>
<li><strong>Real-time storage</strong></li>
<li><strong>Real-time queries</strong></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="open-source">Open source<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#open-source" class="hash-link" aria-label="Direct link to Open source" title="Direct link to Open source">&#x200B;</a></h2>
<p>The license decides the level of openness of an open source product, and further decides whether users will be trapped in a vendor lock-in situation.</p>
<p><strong>Apache Doris</strong> is operated under the Apache Software Foundation and it is governed by <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. This is a highly liberal open source license. Anyone can freely use, modify, and distribute Apache Doris in open source or commercial projects.</p>
<p><strong>Elasticsearch</strong> has undergone several changes in licenses. It was subject to Apache License 2.0 at the very beginning. Then in <a href="https://www.elastic.co/blog/licensing-change" target="_blank" rel="noopener noreferrer">2021</a>, it switched to the <a href="https://www.elastic.co/licensing/elastic-license" target="_blank" rel="noopener noreferrer">Elastic License</a> and <a href="https://www.mongodb.com/licensing/server-side-public-license" target="_blank" rel="noopener noreferrer">SSPL</a>, mostly because some cloud service providers were providing Elasticsearch as a managed service. The Elastic company tried to protect its business interests and moved to the Elastic License in order to restrict certain commercial use. And then in 2024, Elasticsearch announced that <a href="https://www.elastic.co/blog/elasticsearch-is-open-source-again" target="_blank" rel="noopener noreferrer">&quot;Elasticsearch Is Open Source. Again!&quot;</a> by adding the AGPL License. This license has less restrictions on cloud providers.</p>
<p>The difference in licenses reflects the differing ways in which the two open-source projects are managed and operated. Apache Doris is operated under the Apache Software Foundation and adheres to &quot;the Apache Way&quot; and maintains vendor neutrality. It will always be under Apache License and maintain a high level of openness. Elasticsearch is owned and run by the Elastic company, so it is free to change its license based on the changing needs of the company.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-architecture">System architecture<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#system-architecture" class="hash-link" aria-label="Direct link to System architecture" title="Direct link to System architecture">&#x200B;</a></h2>
<p>The system architecture of Apache Doris and Elasticsearch is relevant to how users can deploy them and the software/hardware prerequisites that must be met.</p>
<p><strong>Apache Doris</strong> supports various deployment models, especially after the <a href="https://doris.apache.org/blog/release-note-3.0.0" target="_blank" rel="noopener noreferrer">release of verion 3.0</a>. It can be deployed on-premise the traditional way, which means compute and storage are integrated within the same hardware. It can also be deployed with <a href="https://doris.apache.org/docs/3.0/compute-storage-decoupled/overview" target="_blank" rel="noopener noreferrer">compute and storage decoupled</a>, providing higher flexibility and elasticity.</p>
<p><img decoding="async" loading="lazy" alt="System architecture.jpeg" src="https://doris.apache.org/assets/images/System-architecture-00b81da315da4b5ca4041d6377cbe866.jpeg" width="1280" height="415" class="img_ev3q"></p>
<p>Apache Doris enables the isolation of computing workloads, which makes it well-suited for multi-tenancy. In addition to decoupling compute and storage, it also provides tiered storage so you can choose different storage medium for your hot and cold data.</p>
<p>For workload isolation, Apache Doris provides the <a href="https://doris.apache.org/docs/3.0/admin-manual/workload-management/compute-group" target="_blank" rel="noopener noreferrer">Compute Group</a> and <a href="https://doris.apache.org/docs/3.0/admin-manual/workload-management/workload-group" target="_blank" rel="noopener noreferrer">Workload Group</a> mechanism.</p>
<p><img decoding="async" loading="lazy" alt="System architecture-2.png" src="https://doris.apache.org/assets/images/System-architecture-2-468364f6130920aa606189ac151ccf47.png" width="1120" height="552" class="img_ev3q"></p>
<p>Compute Group is a mechanism for physical isolation between different workloads in a compute-storage decoupled architecture. One or more BE nodes can form a Compute Group.</p>
<p><img decoding="async" loading="lazy" alt="System architecture-3.png" src="https://doris.apache.org/assets/images/System-architecture-3-2c6a79b4e7b8b2e3b939e951efd25bbc.png" width="1280" height="438" class="img_ev3q"></p>
<p>Workload Group is an in-process mechanism for isolating workloads. It achieves resource isolation by finely partitioning or limiting resources (CPU, IO, Memory) within the BE process, which is implemented by Linux CGroup and offers strict hard isolation.</p>
<p><strong>Elasticsearch</strong> supports on-premise and cloud deployment. It does not support compute-storage decoupling. Elasticsearch implements workload isolation by Thread Groups, which provides limited soft resource isolation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="real-time-writes">Real-time writes<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#real-time-writes" class="hash-link" aria-label="Direct link to Real-time writes" title="Direct link to Real-time writes">&#x200B;</a></h2>
<p>The next step after deploying the system is to write data into it. Apache Doris and Elasticsearch are very different in data ingestion.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-capabilities">Write capabilities<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#write-capabilities" class="hash-link" aria-label="Direct link to Write capabilities" title="Direct link to Write capabilities">&#x200B;</a></h3>
<p>Normally there are two ways to write real-time data into a data system. One is push-based, and the other is pull-based. A push-based method means users actively push the data into the database system, such as via HTTP. A pull-based method, for example, is where database system pulls data from data source such as Kafka message queue.</p>
<p><strong>Elasticsearch</strong> supports push-based ingestion, but it requires Logstash to perform pull-based data ingestion, making it less convenient.</p>
<p>As for <strong>Apache Doris</strong>, it supports both push-based method (HTTP <a href="https://doris.apache.org/docs/3.0/data-operate/import/import-way/stream-load-manual" target="_blank" rel="noopener noreferrer">Stream Load</a>) and pull-based method (<a href="https://doris.apache.org/docs/3.0/data-operate/import/import-way/routine-load-manual" target="_blank" rel="noopener noreferrer">Routine Load</a> from Kafka, <a href="https://doris.apache.org/docs/3.0/data-operate/import/import-way/broker-load-manual" target="_blank" rel="noopener noreferrer">Broker Load</a> from object storage and HDFS). In addition, output plugins for <a href="https://doris.apache.org/docs/ecosystem/logstash" target="_blank" rel="noopener noreferrer">Logstash</a> and <a href="https://doris.apache.org/docs/ecosystem/beats" target="_blank" rel="noopener noreferrer">Beats</a> are available to enable seamless data ingestion from Logstash or Beats into Doris.</p>
<p>In addition, Doris provides a special write <a href="https://doris.apache.org/docs/3.0/data-operate/transaction" target="_blank" rel="noopener noreferrer">transaction</a> mechanism. By setting a <a href="https://doris.apache.org/docs/3.0/data-operate/transaction#label-mechanism" target="_blank" rel="noopener noreferrer">label</a> for a batch of data through the Load API, attempting to re-load a label that has been successfully load before will result in an error, thereby achieving data deduplication. This mechanism ensures that data is written without loss or duplication without relying on the uniqueness of primary keys at the storage layer. Additionally, having a unique label for each batch of data offers better performance compared to having a unique primary key for each individual record.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-performance">Write performance<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#write-performance" class="hash-link" aria-label="Direct link to Write performance" title="Direct link to Write performance">&#x200B;</a></h3>
<p><strong>Apache Doris</strong>, as a real-time data warehouse, supports real-time data writes and updates. One of the standout features of Doris is its incredibly high write throughput. This is because the Doris community has put a lot of effort in optimizing it for high-throughput writes such as vertorized writting and  single replica indexing.</p>
<p>On the other hand, the low write throughput of <strong>Elasticsearch</strong> is a well-known pain point. This is due to Elasticsearch&apos;s needs to generate complex inverted index on multiple replicas, causing a lot of overheads.</p>
<p>We compare the write performance of Doris and Elasticsearch using Elasticsearch&apos;s official benchmark <a href="https://github.com/elastic/rally-tracks/tree/master/http_logs" target="_blank" rel="noopener noreferrer">httplogs</a>, under the same hardware resources and storage schema (including field types and inverted indexes). The test environment and results are as follows:</p>
<p><img decoding="async" loading="lazy" alt="write performance.png" src="https://doris.apache.org/assets/images/write-performance-4d69725174a2f844b881ef4231f254cc.png" width="1280" height="1184" class="img_ev3q"></p>
<p>Under the premise of creating the same inverted index, Apache Doris delivers a much higher write throughput than Elasticsearch. This is due to some key advancements in performance optimization, including:</p>
<ol>
<li>Doris is implemented in C++, which is more efficient than Elasticsearch&apos;s Java implementation.</li>
<li>The vectorized execution engine of Doris fully utilizes CPU SIMD instructions to accelerate both data writing and inverted index building. Its columnar storage also facilitates vectorized execution.</li>
<li>The inverted index of Doris is simplified for real-time analytics scenarios, eliminating unnecessary storage structures such as forward indexes and norms.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="real-time-storage">Real-time storage<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#real-time-storage" class="hash-link" aria-label="Direct link to Real-time storage" title="Direct link to Real-time storage">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-format-and-cost">Storage format and cost<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#storage-format-and-cost" class="hash-link" aria-label="Direct link to Storage format and cost" title="Direct link to Storage format and cost">&#x200B;</a></h3>
<p>As a real-time data warehouse, Doris adheres to the typical relational database model, with a storage hierarchy that includes <strong>catalog</strong>, <strong>database</strong>, and <strong>table</strong> levels. A table consists of one or more columns, each with its own data type, and indexes can be created on the columns.</p>
<p>By default, Doris stores tables in a columnar format, meaning that data for a single column is stored in contiguous physical files. This not only achieves a high compression ratio but also ensures high query efficiency in analysis scenarios where only certain columns are accessed, as only the required data is read and processed. Additionally, Doris supports an optional row storage format to accelerate detailed point queries.</p>
<p>In Elasticsearch, data is stored in Lucene using a document model. In this model, an Elasticsearch index is equivalent to a database table, the index mapping corresponds to the database table schema, and fields within the index mapping are akin to columns in a database, each with its own type and index type.</p>
<p>By default, Elasticsearch uses row-based storage (the _source field), where each field has an associated inverted index created for it, but it also supports optional columnar storage (docvalue). Generally, row-based storage is essential in Elasticsearch because it lays the foundation for raw detailed data queries.</p>
<p>Storage space consumption, or more straightforward, storage cost, is a big concern for users. This is another pain point of Elasticsearch - it creates huge storage costs.</p>
<p>Apache Doris community have made a lot of optimizations and successfully reduced the storage cost significantly. We have put a lot of work to simplify <a href="https://doris.apache.org/docs/3.0/table-design/index/inverted-index" target="_blank" rel="noopener noreferrer">inverted index</a>, which is supported in Doris since version 2.0, and it now takes up much less space. <strong>Doris</strong> supports the ZSTD algorithm, which is much more efficient than GZIP and LZ4, and it can reach a data compression ratio of 5:1 ~ 10:1. Since the compression ratio of <strong>Elasticsearch</strong> is usually about 1.5:1, Doris is 3~5 times more efficient than Elasticsearch in data compression.</p>
<p>As demonstrated in the httplogs test results table above, 32GB of raw data occupies 3.2GB in Doris, whereas Elasticsearch defaults to 19.4GB. Even with the latest logsdb optimization mode enabled, Elasticsearch still consumes 11.7GB. Compared to Elasticsearch, Doris reduces storage space by 83% (73% with logsdb enabled).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="table-model">Table model<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#table-model" class="hash-link" aria-label="Direct link to Table model" title="Direct link to Table model">&#x200B;</a></h3>
<p>Apache Doris provides three data models. As for Elasticsearch, I put it as &quot;one and two half&quot; models because it only provides limited support for certain data storage models. I will get to them one by one.</p>
<ul>
<li>
<p>The first is the Duplicate model, which means it allows data duplication. This is suitable for storing logs. Both Doris and Elasticsearch support this model.</p>
</li>
<li>
<p>The second is the primary key model. It works like OLTP databases, which means the data will be deduplicated by key. The <a href="https://doris.apache.org/docs/table-design/data-model/unique" target="_blank" rel="noopener noreferrer">primary key model</a> in <strong>Doris</strong> provides high performance and many user-friendly features. Just like many databases, you can define one or multiple fields as the primary and unique key.</p>
<ul>
<li>
<p>However, in <strong>Elasticsearch</strong>, you can only use a special field <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/mapping-id-field.html" target="_blank" rel="noopener noreferrer">_id</a> as the unique identifier for a document (a row in database). Unlike database primary key, there are many limitations for it.</p>
</li>
<li>
<p>The <code>_id</code> field can not be used for aggregation or sorting</p>
</li>
<li>
<p>The <code>_id</code> field can not be larger than 512 bytes</p>
</li>
<li>
<p>The <code>_id</code> field can not be multiple fields, so you will need to combine the multiple fields into one before you can use them as the primary key, but the length of the combined _id can still not exceed 512 bytes.</p>
</li>
</ul>
</li>
<li>
<p>The third is the aggregation model, which means data will be aggregated or rolled up.</p>
</li>
</ul>
<p>In its early stages, Elasticsearch provided the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/rollup-getting-started.html" target="_blank" rel="noopener noreferrer">rollup</a> feature through the commercial X-Pack plugin, allowing users to create rollup jobs that configured dimensions, metric fields, and aggregation intervals for rollup indexes based on a base index. However, X-Pack rollup had several limitations:</p>
<ol>
<li><strong>Data Asynchrony</strong>: Rollup jobs ran in the background, meaning the data in the rollup index was not synchronized in real time with the base index.</li>
<li><strong>Specialized Query Requirement</strong>: Queries targeting rolled-up data required dedicated rollup queries, and users had to manually specify the rollup index in their queries.</li>
</ol>
<p>Perhaps these reasons explain why <strong>Elasticsearch has deprecated the use of rollup starting in version 8.11.0</strong> and now recommends <strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/downsampling.html" target="_blank" rel="noopener noreferrer">downsampling</a></strong> as an alternative. Downsampling eliminates the need to specify a separate index and simplifies querying, but it also comes with its own constraints:</p>
<ol>
<li><strong>Time-Series Exclusive</strong>: Downsampling is only applicable to time-series data, relying on time as the primary dimension. It cannot be used for other data types, such as business reporting data.</li>
<li><strong>Index Replacement</strong>: A downsampled index replaces the original index, meaning aggregated data and raw data cannot coexist.</li>
<li><strong>Read-Only</strong>: Downsampling can only be performed on the original index after it transitions to a read-only state. Data actively being written (e.g., real-time ingestion) cannot undergo downsampling.</li>
</ol>
<p>As a real-time data warehouse excelling in aggregation and analytics, <strong>Doris</strong> has supported aggregation capabilities since its early use cases in online reporting and analytics. It offers two flexible mechanisms:</p>
<ol>
<li><strong><a href="https://doris.apache.org/docs/3.0/table-design/data-model/aggregate" target="_blank" rel="noopener noreferrer">Aggregation Table Model</a></strong>:
<ul>
<li>Data is directly aggregated during ingestion, eliminating the storage of raw data.</li>
<li>Only aggregated results are stored, drastically reducing storage costs.</li>
</ul>
</li>
<li><strong><a href="https://doris.apache.org/docs/query-acceleration/materialized-view/sync-materialized-view" target="_blank" rel="noopener noreferrer">Aggregated Materialized Views</a>/ Rollup</strong>:
<ul>
<li>Users can create aggregated materialized views on a base table. Data is written to both the base table and the materialized view simultaneously, ensuring atomic and synchronized updates.</li>
<li>Queries target the base table, and the query optimizer automatically rewrites queries to leverage the materialized view for accelerated performance.</li>
</ul>
</li>
</ol>
<p>This design ensures real-time aggregation while maintaining query flexibility and efficiency in Doris.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="flexible-schema">Flexible schema<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#flexible-schema" class="hash-link" aria-label="Direct link to Flexible schema" title="Direct link to Flexible schema">&#x200B;</a></h3>
<p>In most cases, especially for online business scenarios, users often need to update or modify the data schema. Elasticsearch supports flexible schema, but it only allows users to dynamically add columns.</p>
<p><img decoding="async" loading="lazy" alt="Flexible schema.png" src="https://doris.apache.org/assets/images/Flexible-schema-4a101b19b1ce379dcd31c5d6c0106aac.png" width="1280" height="687" class="img_ev3q"></p>
<p>When you write JSON data into Elasticsearch, if the data contains a new field which is not in index mapping, Elasticsearch will create a new field in the schema through <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/dynamic-field-mapping.html" target="_blank" rel="noopener noreferrer">dynamic mapping</a>, so you don&apos;t need to change the  schema beforehand, like you have to do in traditional databases. However, in Elasticsearch, users cannot directly delete a field of the schema. For that, you will need a reindex operation that reads and writes the entire index in Elasticsearch.</p>
<p>In addition, Elasticsearch does not allow adding index for an already existed field. Imagine that you have 100 fields in a schema, and you have created inverted index for 10 of them, and then some days later, you want to add inverted index for another 5 fields, but no, you can&apos;t do that in Elasticsearch. Likewise, deleting index for a field is not allowed either.</p>
<p>As a result, to avoid such troubles, most Elasticsearch users will just create inverted index for all of their fields, but that causes much slower data writing and much larger storage usage.</p>
<p>Also, Elasticsearch does not allow you to modify your index names or your field names. To sum up, if you need to make any changes to your data other than adding a field, you will need to re-index everything. That&apos;s a highly resource-intensive and time-consuming operation.</p>
<p>What about <strong>Apache Doris</strong>? Doris supports all these <a href="https://doris.apache.org/docs/3.0/table-design/schema-change" target="_blank" rel="noopener noreferrer">schema changes</a>. You can add or delete fields and <a href="https://doris.apache.org/docs/3.0/table-design/index/inverted-index#managing-indexes" target="_blank" rel="noopener noreferrer">indexes</a> as you want, and you can change the name of any table or field easily. Doris can finish these changes within just a few milliseconds. Such flexibility will save you a lot of time and resource, especially when you have changing business needs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="real-time-queries">Real-time queries<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#real-time-queries" class="hash-link" aria-label="Direct link to Real-time queries" title="Direct link to Real-time queries">&#x200B;</a></h2>
<p>We break down the real-time querying of Elasticsearch and Apache Doris into three dimensions: usability, query capabilities, and performance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usability">Usability<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#usability" class="hash-link" aria-label="Direct link to Usability" title="Direct link to Usability">&#x200B;</a></h3>
<p>One key aspect of usability is reflected in the user interface.</p>
<p>The Doris SQL interface is designed to maintain protocol and syntax compatibility with MySQL. It even does not have its own client or JDBC driver, allowing the use of MySQL&#x2019;s client and JDBC driver directly. This is a big convenience for many users familiar with MySQL. In fact, this choice was made early in the original design of Doris to make it more user-friendly. Since MySQL is the most widely used open-source OLTP database, Doris is designed to complement MySQL, creating the best practice for combining OLTP (MySQL) with OLAP (Doris). This allows engineers and data analysts to work seamlessly within a single interface and set of syntax, covering both transactional and analytical workloads.</p>
<p>On the other hand, Elasticsearch has its own Domain Specific Language (DSL), which is originally designed for searching. This DSL is part of the Elasticsearch ecosystem, it often requires engineers to invest a lot of time and effort to fully understand and use the DSL effectively.</p>
<p>Let&apos;s take a look at one example:</p>
<p><img decoding="async" loading="lazy" alt="Real-time queries.png" src="https://doris.apache.org/assets/images/Real-time-queries-38c7e2bc6c2069a82fa10849a212f911.png" width="1280" height="408" class="img_ev3q"></p>
<p>Imagine we want to search for a particular keyword within a particular time range, and then group and order the data by time interval to visualize it as a trend chart.</p>
<p>In Doris, this can be done with only 7 lines of SQL. However, in Elasticsearch, the same process requires 30 lines.</p>
<p>And it&apos;s not just about the code complexity. I believe many of you may find this relatable: The first attempt to learn Elasticsearch&apos;s DSL is quite challenging. And even after gaining familiarity with it, crafting a query often requires frequent reference to documentation and examples. Due to its inherent complexity, writing DSL queries from scratch remains a challenging task. In contrast, SQL is simple, clear, and highly structured. Most engineers can easily write a query like this without much effort.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-capabilities">Query capabilities<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#query-capabilities" class="hash-link" aria-label="Direct link to Query capabilities" title="Direct link to Query capabilities">&#x200B;</a></h3>
<p><strong>Elasticsearch</strong> is good at searching. As its name suggests, it was built for search. But beyond search and aggregation queries, it doesn&apos;t support complex analytical queries, such as multi-table JOIN.</p>
<p><strong>Apache Doris</strong> is a general-purpose data warehouse. It provides strong support for complex analytics, including multi-table JOIN, UDF, subquery, window function, logic view, materialized view, and data lakehouse. And Doris has been improving its searching capabilities since version 2.0. We have introduced inverted index and full-text search, so it is getting increasingly competitive in this area.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="search">Search<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#search" class="hash-link" aria-label="Direct link to Search" title="Direct link to Search">&#x200B;</a></h4>
<p>While this article focuses on real-time analytics scenarios, we have chosen not to overlook <strong>Elasticsearch&#x2019;s core strength</strong>: its search capabilities.</p>
<p>Elasticsearch, renowned for its search performance, leverages the <strong>Apache Lucene library</strong> under the hood. It provides two primary indexing structures:</p>
<ul>
<li><strong>Inverted indexes</strong> for text fields.</li>
<li><strong>BKD-Tree indexes</strong> for numeric, date, and geospatial data.</li>
</ul>
<p>Elasticsearch supports the following search paradigms:</p>
<ol>
<li><strong>Exact Matching</strong>:  equality or range queries for numeric, date, or non-tokenized string fields (keyword), powered by <strong>BKD-Tree indexes</strong> (numeric/date) or <strong>non-tokenized inverted indexes</strong> (exact term matches).</li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/full-text-queries.html" target="_blank" rel="noopener noreferrer">Full-Text Search</a></strong>:  keyword, phrase, or multi-term matching. During ingestion, text is split into tokens using a configurable tokenizer. Queries match tokens, phrases, or combinations (e.g., <code>&quot;quick brown fox&quot;</code>).  Elasticsearch supports some advanced full-text search features, such as relevance scoring, auto-completion, spell-checking, and search suggestions.</li>
<li><strong>Vector Search based on ANN index.</strong></li>
</ol>
<p><strong>Doris</strong> also supports a rich set of indexes to accelerate queries, including <strong>prefix-sorted indexes</strong>,  <strong>ZoneMap indexes</strong>,  <strong>BloomFilter indexes and N-Gram BloomFilter indexes</strong>.</p>
<p>Starting from version 2.0, Doris has added <strong>inverted indexes</strong> and BKD-Tree indexes to support <strong>exact matching</strong> and full-text search. <strong>Vector search</strong> is currently under development and is expected to be available within the next six months.</p>
<p>There are some <strong>differences between the indexes of Apache Doris and Elasticsearch</strong>:</p>
<ol>
<li><strong><a href="https://doris.apache.org/docs/3.0/table-design/index/index-overview" target="_blank" rel="noopener noreferrer">Diverse indexing strategies</a></strong>: Doris does not rely solely on inverted indexes for query acceleration. It offers different indexes for different scenarios. <strong>ZoneMap</strong>, BloomFilter, and <strong>N-Gram BloomFilter indexes</strong> are <strong>skip indexes</strong> that accelerate analytical queries by skipping non-matching data blocks based on <code>WHERE</code> conditions. The <strong>N-Gram BloomFilter index</strong> is specifically optimized for <code>LIKE</code>-style fuzzy string matching. Inverted index and Prefix-sorted indexes are point query indexes that speed up point queries by locating which rows satisfy the WHERE conditions through the index and directly read those rows.</li>
<li><strong>Performance centric design</strong>: Doris prioritizes <strong>speed and efficiency</strong> over advanced search features. To achieve faster index building and query performance (see the Query Performance section in the following), it omits certain complex functionalities of inverted indexes at present, such as relevance scoring, auto-completion, spell-checking, and search suggestions. Since there are more critical in document or web search scenarios, which are not Doris&#x2019; primary focus on real-time analytics.</li>
</ol>
<p>For <strong>exact matching</strong> and <strong>common full-text search</strong> requirements, such as term, range, phrase, multi-field matching, Doris is fully capable and reliable in most use cases. For <strong>complex search needs</strong> (e.g., relevance scoring, auto-completion, spell-checking, or search suggestions), <strong>Elasticsearch</strong> remains the more suitable choice.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aggregation">Aggregation<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#aggregation" class="hash-link" aria-label="Direct link to Aggregation" title="Direct link to Aggregation">&#x200B;</a></h4>
<p>Both <strong>Elasticsearch</strong> and <strong>Doris</strong> support a wide range of aggregation operators, including:</p>
<ul>
<li><strong>Basic aggregations</strong>: <code>MIN</code>, <code>MAX</code>, <code>COUNT</code>, <code>SUM</code>, <code>AVG</code>.</li>
<li><strong>Advanced aggregations</strong>: <code>PERCENTILE</code> (quantiles), <code>HISTOGRAM</code> (bucketed distributions).</li>
<li><strong>Aggregation modes</strong>: Global aggregation, key-based grouping (e.g., <code>GROUP BY</code>).</li>
</ul>
<p>However, their approaches to aggregation analysis differ significantly in the following aspects:</p>
<p><strong>1. Query syntax and usability:</strong> Doris uses <strong>standard SQL syntax</strong> (<code>GROUP BY</code> clauses + aggregation functions), making it intuitive for analysts and developers familiar with SQL. <strong>Elasticsearch</strong> relies on a <strong>custom Domain-Specific Language (DSL)</strong> with concepts like <code>metric agg</code>, <code>bucket agg</code>, and <code>pipeline agg</code>. Complexity increases with nested or multi-layered aggregations, requiring steeper learning curves.</p>
<p><strong>2. Result accuracy:</strong> Elasticsearch outputs inaccurate approximate result for many aggregation types by default. Aggregations (e.g., <code>terms</code> agg) are executed per shard, with each shard returning only its top results (e.g., top 10 buckets). These partial results are merged globally, leading to potentially inaccurate final outputs. As a serious OLAP database, Doris ensures exact results by processing full datasets without approximations.</p>
<p><strong>3. Query Performance:</strong> Doris demonstrates <strong>significant performance advantages over Elasticsearch</strong> in aggregation-heavy OLAP workloads like those on ClickBench (see more in the Query performance section bellow).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="join">JOIN<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#join" class="hash-link" aria-label="Direct link to JOIN" title="Direct link to JOIN">&#x200B;</a></h4>
<p><strong>Elasticsearch</strong> does not support JOIN, making it unable to execute common benchmarks like TPC-H or TPC-DS. Since JOINs are critical in data analysis, Elasticsearch provides some complex <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/joining-queries.html" target="_blank" rel="noopener noreferrer">workarounds</a> with significant limitations:</p>
<ol>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/parent-join.html" target="_blank" rel="noopener noreferrer">Parent-child</a></strong> relationships and has_child / has_parent queries: Simulate JOINs by establishing parent-child relationships within a single index. Child documents store the parent document&#x2019;s ID. <code>has_child</code> queries first find matching child documents, then retrieve their parent documents via the stored parent IDs. <code>has_parent</code> queries reverse this logic.  It&apos;s complex and Elasticsearch explicitly warns against equating this approach to database-style JOINs.
<blockquote>
<p>We don&#x2019;t recommend using multiple levels of relations to replicate a relational model. Each level of relation adds an overhead at query time in terms of memory and computation. For better search performance, denormalize your data instead.</p>
</blockquote>
</li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/query-dsl-terms-query.html#query-dsl-terms-lookup" target="_blank" rel="noopener noreferrer">Terms lookup</a></strong>:  Similar to an IN-subquery by fetching a value list from one index and using it in a <code>terms</code> query on another.  It&apos;s only suitable for large-table-to-small-table JOINs (e.g., filtering a large dataset using a small reference list), but performs very poorly for large-table-to-large-table JOINs due to scalability issues.</li>
</ol>
<p><strong>Doris</strong> provides comprehensive support for <a href="https://doris.apache.org/docs/3.0/query-data/join/" target="_blank" rel="noopener noreferrer">JOIN</a> operations, including:</p>
<ul>
<li>INNER JOIN</li>
<li>CROSS JOIN</li>
<li>LEFT / RIGHT / FULL OUTER JOIN</li>
<li>LEFT / RIGHT SEMI JOIN</li>
<li>LEFT / RIGHT ANTI JOIN</li>
</ul>
<p>Further more, <strong>Doris&#x2019; query optimizer</strong> adaptively selects optimal execution plans for JOIN operations based on data characteristics and statistics, including:</p>
<ul>
<li><strong>Small-large table JOIN</strong>:
<ul>
<li><strong>Broadcast JOIN</strong>: The smaller table is broadcast to all nodes for local joins.</li>
</ul>
</li>
<li><strong>Large-large table JOIN</strong>:
<ul>
<li><strong>Bucket Shuffle JOIN</strong>: Used when the left table&#x2019;s bucketing distribution aligns with the JOIN key.</li>
<li><strong>Colocate JOIN</strong>: Applied when both the left and right tables share identical bucketing distributions with the  JOIN keys.</li>
<li><strong>Runtime Filter</strong>: Reduces data scanned in the left table by pushing down predicates from the right table using runtime-generated filters.</li>
</ul>
</li>
</ul>
<p>This intelligent optimization ensures efficient JOIN execution across diverse data scales and distributions, including <a href="https://doris.apache.org/docs/3.0/benchmark/tpch/" target="_blank" rel="noopener noreferrer">TPC-H</a> and <a href="https://doris.apache.org/docs/3.0/benchmark/tpcds" target="_blank" rel="noopener noreferrer">TPC-DS</a> benchmarks.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h4>
<p>Data warehouses addresses the need for fast data analysis, while data lakes are good at data storage and management. The integration of them, known as &quot;<a href="https://doris.apache.org/docs/3.0/lakehouse/lakehouse-overview" target="_blank" rel="noopener noreferrer">lakehouse</a>&quot;, is to facilitate the seamless integration and free flow of data between the data lake and data warehouse. It enables users to leverage the analytic capabilities of the data warehouse while harnessing the data management power of the data lake.</p>
<p><img decoding="async" loading="lazy" alt="lakehouse.png" src="https://doris.apache.org/assets/images/lakehouse-e089ec3a90a1b6725e8f08d96d45c328.png" width="1280" height="640" class="img_ev3q"></p>
<p>Apache Doris can work as a data lakehouse with its <a href="https://doris.apache.org/docs/3.0/lakehouse/lakehouse-overview#multi-catalog" target="_blank" rel="noopener noreferrer">Multi Catalog</a> feature. It can access databases and data lakes including Apache Hive, Apache Iceberg, Apache Hudi, Apache Paimon, LakeSoul, Elasticsearch, MySQL, Oracle, and SQLServer. It also supports Apache Ranger for privilege management.</p>
<p>Elasticsearch does not support querying external data, and of course, it does not support lakehouse either.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-performance">Query performance<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#query-performance" class="hash-link" aria-label="Direct link to Query performance" title="Direct link to Query performance">&#x200B;</a></h3>
<p><strong>Apache Doris</strong> has been extensively optimized for multiple scenarios, so it can deliver high performance in many use cases. For example, Doris can achieve tens of thousands of QPS for high-concurrency point queries, and it delivers industry-leading performance in aggregation analysis on a global scale.</p>
<p><strong>Elasticsearch</strong> is good at point queries (retrieving just a small amount of data). However, it might struggle with complex analytical workloads.</p>
<p><a href="https://elasticsearch-benchmarks.elastic.co/" target="_blank" rel="noopener noreferrer">Elasticsearch httplogs</a> and the Microsoft Azure <a href="https://gigaom.com/report/log-data-analytics-testing/" target="_blank" rel="noopener noreferrer">logsbench</a> are benchmarks for log storage and search. Both tests show that Doris is about 3 - 4 times faster than Elasticsearch in data writing, but only uses 1/6 - 1/4 of the storage space that Elasticsearch uses. Then for data queries, Doris is more than 2 times faster than Elasticsearch.</p>
<p><img decoding="async" loading="lazy" alt="Query performance.png" src="https://doris.apache.org/assets/images/Query-performance-0fd762e5e1d85f0a4ecd6f1bfeccb93e.png" width="1280" height="565" class="img_ev3q"></p>
<p><a href="https://benchmark.clickhouse.com/#eyJzeXN0ZW0iOnsiQWxsb3lEQiI6ZmFsc2UsIkF0aGVuYSAocGFydGl0aW9uZWQpIjpmYWxzZSwiQXRoZW5hIChzaW5nbGUpIjpmYWxzZSwiQXVyb3JhIGZvciBNeVNRTCI6ZmFsc2UsIkF1cm9yYSBmb3IgUG9zdGdyZVNRTCI6ZmFsc2UsIkJ5Q29uaXR5IjpmYWxzZSwiQnl0ZUhvdXNlIjpmYWxzZSwiY2hEQiI6ZmFsc2UsIkNpdHVzIjpmYWxzZSwiQ2xpY2tIb3VzZSBDbG91ZCAoYXdzKSI6ZmFsc2UsIkNsaWNrSG91c2UgQ2xvdWQgKGdjcCkiOmZhbHNlLCJDbGlja0hvdXNlIChkYXRhIGxha2UsIHBhcnRpdGlvbmVkKSI6ZmFsc2UsIkNsaWNrSG91c2UgKGRhdGEgbGFrZSwgc2luZ2xlKSI6ZmFsc2UsIkNsaWNrSG91c2UgKFBhcnF1ZXQsIHBhcnRpdGlvbmVkKSI6ZmFsc2UsIkNsaWNrSG91c2UgKFBhcnF1ZXQsIHNpbmdsZSkiOmZhbHNlLCJDbGlja0hvdXNlICh3ZWIpIjpmYWxzZSwiQ2xpY2tIb3VzZSI6ZmFsc2UsIkNsaWNrSG91c2UgKHR1bmVkKSI6ZmFsc2UsIkNsaWNrSG91c2UgKHR1bmVkLCBtZW1vcnkpIjpmYWxzZSwiQ3JhdGVEQiI6ZmFsc2UsIkRhdGFiZW5kIjpmYWxzZSwiRGF0YUZ1c2lvbiAoUGFycXVldCwgcGFydGl0aW9uZWQpIjpmYWxzZSwiRGF0YUZ1c2lvbiAoUGFycXVldCwgc2luZ2xlKSI6ZmFsc2UsIkFwYWNoZSBEb3JpcyI6dHJ1ZSwiRHJ1aWQiOmZhbHNlLCJEdWNrREIgKFBhcnF1ZXQsIHBhcnRpdGlvbmVkKSI6ZmFsc2UsIkR1Y2tEQiI6ZmFsc2UsIkVsYXN0aWNzZWFyY2giOnRydWUsIkVsYXN0aWNzZWFyY2ggKHR1bmVkKSI6dHJ1ZSwiR2xhcmVEQiI6ZmFsc2UsIkdyZWVucGx1bSI6ZmFsc2UsIkhlYXZ5QUkiOmZhbHNlLCJIeWRyYSI6ZmFsc2UsIkluZm9icmlnaHQiOmZhbHNlLCJLaW5ldGljYSI6ZmFsc2UsIk1hcmlhREIgQ29sdW1uU3RvcmUiOmZhbHNlLCJNYXJpYURCIjpmYWxzZSwiTW9uZXREQiI6ZmFsc2UsIk1vbmdvREIiOmZhbHNlLCJNb3RoZXJkdWNrIjpmYWxzZSwiTXlTUUwgKE15SVNBTSkiOmZhbHNlLCJNeVNRTCI6ZmFsc2UsIk94bGEuY29tIjpmYWxzZSwiUGFyYWRlREIiOmZhbHNlLCJQaW5vdCI6ZmFsc2UsIlBvc3RncmVTUUwgKHR1bmVkKSI6ZmFsc2UsIlBvc3RncmVTUUwiOmZhbHNlLCJRdWVzdERCIChwYXJ0aXRpb25lZCkiOmZhbHNlLCJRdWVzdERCIjpmYWxzZSwiUmVkc2hpZnQiOmZhbHNlLCJTZWxlY3REQiI6ZmFsc2UsIlNpbmdsZVN0b3JlIjpmYWxzZSwiU25vd2ZsYWtlIjpmYWxzZSwiU1FMaXRlIjpmYWxzZSwiU3RhclJvY2tzIjpmYWxzZSwiVGFibGVzcGFjZSI6ZmFsc2UsIlRpbWVzY2FsZURCIChjb21wcmVzc2lvbikiOmZhbHNlLCJUaW1lc2NhbGVEQiI6ZmFsc2UsIlVtYnJhIjpmYWxzZX0sInR5cGUiOnsiQyI6dHJ1ZSwiY29sdW1uLW9yaWVudGVkIjp0cnVlLCJQb3N0Z3JlU1FMIGNvbXBhdGlibGUiOnRydWUsIm1hbmFnZWQiOnRydWUsImdjcCI6dHJ1ZSwic3RhdGVsZXNzIjp0cnVlLCJKYXZhIjp0cnVlLCJDKysiOnRydWUsIk15U1FMIGNvbXBhdGlibGUiOnRydWUsInJvdy1vcmllbnRlZCI6dHJ1ZSwiQ2xpY2tIb3VzZSBkZXJpdmF0aXZlIjp0cnVlLCJlbWJlZGRlZCI6dHJ1ZSwic2VydmVybGVzcyI6dHJ1ZSwiYXdzIjp0cnVlLCJSdXN0Ijp0cnVlLCJzZWFyY2giOnRydWUsImRvY3VtZW50Ijp0cnVlLCJhbmFseXRpY2FsIjp0cnVlLCJzb21ld2hhdCBQb3N0Z3JlU1FMIGNvbXBhdGlibGUiOnRydWUsInRpbWUtc2VyaWVzIjp0cnVlfSwibWFjaGluZSI6eyIxNiB2Q1BVIDEyOEdCIjp0cnVlLCI4IHZDUFUgNjRHQiI6dHJ1ZSwic2VydmVybGVzcyI6dHJ1ZSwiMTZhY3UiOnRydWUsImM2YS40eGxhcmdlLCA1MDBnYiBncDIiOnRydWUsIkwiOnRydWUsIk0iOnRydWUsIlMiOnRydWUsIlhTIjp0cnVlLCJjNmEubWV0YWwsIDUwMGdiIGdwMiI6ZmFsc2UsIjE5MkdCIjp0cnVlLCIyNEdCIjp0cnVlLCIzNjBHQiI6dHJ1ZSwiNDhHQiI6dHJ1ZSwiNzIwR0IiOnRydWUsIjk2R0IiOnRydWUsIjE0MzBHQiI6dHJ1ZSwiZGV2Ijp0cnVlLCI3MDhHQiI6dHJ1ZSwiYzVuLjR4bGFyZ2UsIDUwMGdiIGdwMiI6dHJ1ZSwiYzUuNHhsYXJnZSwgNTAwZ2IgZ3AyIjp0cnVlLCJjNmEuNHhsYXJnZSwgMTUwMGdiIGdwMiI6dHJ1ZSwiY2xvdWQiOnRydWUsImRjMi44eGxhcmdlIjp0cnVlLCJyYTMuMTZ4bGFyZ2UiOnRydWUsInJhMy40eGxhcmdlIjp0cnVlLCJyYTMueGxwbHVzIjp0cnVlLCJTMiI6dHJ1ZSwiUzI0Ijp0cnVlLCIyWEwiOnRydWUsIjNYTCI6dHJ1ZSwiNFhMIjp0cnVlLCJYTCI6dHJ1ZSwiTDEgLSAxNkNQVSAzMkdCIjp0cnVlfSwiY2x1c3Rlcl9zaXplIjp7IjEiOnRydWUsIjIiOnRydWUsIjQiOnRydWUsIjgiOnRydWUsIjE2Ijp0cnVlLCIzMiI6dHJ1ZSwiNjQiOnRydWUsIjEyOCI6dHJ1ZSwic2VydmVybGVzcyI6dHJ1ZSwiZGVkaWNhdGVkIjp0cnVlLCJ1bmRlZmluZWQiOnRydWV9LCJtZXRyaWMiOiJob3QiLCJxdWVyaWVzIjpbdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZV19" target="_blank" rel="noopener noreferrer">ClickBench</a> is a benchmark created and maintained by the ClickHouse team to evaluate the performance of analytical databases. It results show that Apache Doris delivers <strong>out-of-the-box</strong> query performance <strong>21 times faster</strong> than Elasticsearch and <strong>6 times faster</strong> than a fine-tuned Elasticsearch.</p>
<p><img decoding="async" loading="lazy" alt="Query performance-2.png" src="https://doris.apache.org/assets/images/Query-performance-2-503b2bd7a3f7cf5a014e80a23c0ecc05.png" width="1280" height="80" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="comparison-summary">Comparison Summary<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#comparison-summary" class="hash-link" aria-label="Direct link to Comparison Summary" title="Direct link to Comparison Summary">&#x200B;</a></h2>
<p>In summary, Doris follows Apache License 2.0, which is a highly open license to ensure that Doris remains truly open and will continue to uphold such openness in the future.</p>
<p>Secondly, Doris supports both compute-storage coupled and decoupled mode, while Elasticsearch only supports the former, which enable more powerful elasticity and resource isolation.</p>
<p>Thirdly, Doris provides high performance in data ingestion. It is usually 3~5 times faster than Elasticsearch.</p>
<p>In terms of storage, compared to Elasticsearch, Doris can reduce storage costs by 70% or more. It is also 10 times faster than Elasticsearch in data updates.</p>
<p>As for data queries, Doris outperforms Elasticsearch by a lot. It also provides analytic capabilities that Elasticsearch does have, including multi-table JOIN, materialized views, and data lakehouse.</p>
<p><img decoding="async" loading="lazy" alt="comparisons.png" src="https://doris.apache.org/assets/images/comparisons-0a1ad658b623b841d29f70af1a2a7de2.png" width="1280" height="964" class="img_ev3q">
<img decoding="async" loading="lazy" alt="comparisons-2.png" src="https://doris.apache.org/assets/images/comparisons-2-7fa21a175b6d96706dc1cd697bdf853e.png" width="1280" height="1192" class="img_ev3q">
<img decoding="async" loading="lazy" alt="comparisons-3.png" src="https://doris.apache.org/assets/images/comparisons-3-d8740a99961c6701ceffe829263059a1.png" width="1280" height="1240" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases">Use cases<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#use-cases" class="hash-link" aria-label="Direct link to Use cases" title="Direct link to Use cases">&#x200B;</a></h2>
<p>Many users have replaced Elasticsearch with Apache Doris in their production environments and received exciting results. I will introduce some user stories from the fields of observability, cyber security, and real-time business analysis.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="observability">Observability<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#observability" class="hash-link" aria-label="Direct link to Observability" title="Direct link to Observability">&#x200B;</a></h3>
<p><strong>User A: a world-famous short video provider</strong></p>
<ul>
<li>Daily incremental data: 800 billion rows (500 TB)</li>
<li>Average write throughput: 10 million row/s (60GB/s)</li>
<li>Peak write throughput: 30 million row/s (90GB/s)</li>
</ul>
<p>Apache Doris supports logging and tracing data storage for this tech giant and meets the data import performance requirements for nearly all use cases within the company.</p>
<p><img decoding="async" loading="lazy" alt="Observability.png" src="https://doris.apache.org/assets/images/Observability-0c354100d26ffddcecd95d82d8b66bb1.png" width="1280" height="328" class="img_ev3q"></p>
<p><strong>User B: NetEase - one of the World&apos;s Highest-Yielding Game Companies</strong></p>
<ul>
<li>Replacing Elasticsearch with Apache Doris for log analysis: reducing storage consumption by 2/3 and achieving 10X query performance</li>
<li>Replacing InfluxDB with Apache Doris for time-series data analysis: saving 50% of server resources and reducing storage consumption by 67%</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Observability-2.png" src="https://doris.apache.org/assets/images/Observability-2-c178019ccf2ae7a409f4afaac4ae3a3e.png" width="1280" height="365" class="img_ev3q"></p>
<p><strong>User C: an observability platform provider</strong></p>
<p>Apache Doris offers a special data type, <a href="https://doris.apache.org/blog/variant-in-apache-doris-2.1" target="_blank" rel="noopener noreferrer">VARIANT</a>, to handle semi-structured data in log and tracing, reducing costs by 70% and delivering 2~3 times faster full-text search performance compared to the Elasticsearch-based solution.</p>
<p><img decoding="async" loading="lazy" alt="Observability-3.png" src="https://doris.apache.org/assets/images/Observability-3-484559d17c7b3238e62b3aa8c2f052f5.png" width="1280" height="346" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cyber-security">Cyber security<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#cyber-security" class="hash-link" aria-label="Direct link to Cyber security" title="Direct link to Cyber security">&#x200B;</a></h3>
<p><strong>User A: QAX - a listed company &amp; leading cyber security leader</strong></p>
<p>The Doris-based security logging solution uses 40% less storage space, delivers 2X faster write performance, and supports full-text search, aggregation analysis, and multi-table JOIN capabilities in one database system.</p>
<p><img decoding="async" loading="lazy" alt="Cyber security.png" src="https://doris.apache.org/assets/images/Cyber-security-c3b176bbfbb20b970106efda6ff1e3db.png" width="1280" height="377" class="img_ev3q"></p>
<p><strong>User B: a payment platform with nearly 600 million registered users</strong></p>
<p>As a unified security data storage solution, Apache Doris delivers 4X faster write speeds, 3X better query performance, and saves 50% storage space compared to the previous architecture with diverse tech stacks using Elasticsearch, Hive and Presto.</p>
<p><img decoding="async" loading="lazy" alt="Cyber security-2.png" src="https://doris.apache.org/assets/images/Cyber-security-2-c3ec4307fe9b2078fd5d5f087f7b9920.png" width="1280" height="379" class="img_ev3q"></p>
<p><strong>User C: a leading cyber security solution provider</strong></p>
<p>Compared to Elasticsearch, Doris delivers 2 times faster write speeds, 4 times better query performance, and a 4 times data compression ratio.</p>
<p><img decoding="async" loading="lazy" alt="Cyber security-3.png" src="https://doris.apache.org/assets/images/Cyber-security-3-c9030ffacacc789a948e29ba021e2182.png" width="1280" height="694" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="business-analysis">Business analysis<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#business-analysis" class="hash-link" aria-label="Direct link to Business analysis" title="Direct link to Business analysis">&#x200B;</a></h3>
<p><strong>User A: a world-leading live e-commerce company</strong></p>
<p>The user previously relied on Elasticsearch to handle online queries for their live stream detail pages, but they faced big challenges in cost and concurrency. After migrating to Apache Doris, they achieve:</p>
<ul>
<li>3 times faster real-time writes: 30w/s -&gt; 100w/s</li>
<li>4 times higher query concurrency: 500QPS -&gt; 2000QPS</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Business analysis.png" src="https://doris.apache.org/assets/images/Business-analysis-12d34ba8931fd3b43354a25d9f93b008.png" width="1280" height="375" class="img_ev3q"></p>
<p><strong>User B: Tencent Music Entertainment</strong></p>
<p>Previously, TME content library used both Elasticsearch and ClickHouse to meet their needs for data searching and analysis, but managing two separate systems was complex and inefficient. With Doris, they are able to unify the two systems into one single platform to support both data searching and analysis. The new architecture delivers 4X faster write speeds, reduces storage costs by 80%, and supports complex analytical operations.</p>
<p><img decoding="async" loading="lazy" alt="Business analysis-2.png" src="https://doris.apache.org/assets/images/Business-analysis-2-8ccd357c1664ebc65a8aa6bc62b5bbf6.png" width="1280" height="253" class="img_ev3q"></p>
<p><strong>User C: a web browser provider with 600 million users</strong></p>
<p>After migrating to Apache Doris for a unified solution for log storage and report analysis, the company doubled its aggregation analysis efficiency, reduced storage consumption by 60%, and cut SQL development time by half.</p>
<p><img decoding="async" loading="lazy" alt="Business analysis-3.png" src="https://doris.apache.org/assets/images/comparisons-3-d8740a99961c6701ceffe829263059a1.png" width="1280" height="1240" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="taking-apache-doris-to-the-next-level">Taking Apache Doris to the next level<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics/#taking-apache-doris-to-the-next-level" class="hash-link" aria-label="Direct link to Taking Apache Doris to the next level" title="Direct link to Taking Apache Doris to the next level">&#x200B;</a></h2>
<p><img decoding="async" loading="lazy" alt="Taking Apache Doris to the next level.png" src="https://doris.apache.org/assets/images/Taking-Apache-Doris-to-the-next-level-3f01e8665550da6623b1bf7e20ff9b9e.png" width="1280" height="586" class="img_ev3q"></p>
<p>For the Apache Doris community developers, the path to making Doris good enough to replace Elasticsearch wasn&apos;t easy. In 2022, we started adding inverted index capabilities to Doris. At that time, this decision was met with skepticism. Many viewed inverted indexes as a feature exclusive to Elasticsearch, a domain few in the industry dared to venture into. Nevertheless, we went with it, and today we can confidently say that we have succeeded.</p>
<p>In 2022, we developed this feature from the ground up, and after a year of dedicated effort, we open-sourced it. Initially, we had only one user, QAX, who was willing to test and adopt the feature. We are deeply grateful to them for their early support during this pivotal stage.</p>
<p>By 2023, the value of Doris with inverted indexes became increasingly evident, leading to broader adoption by about 10 companies.</p>
<p>The growth momentum has continued, and as of 2024, we are experiencing rapid expansion, with over 100 companies now leveraging Doris to replace Elasticsearch.</p>
<p>Looking ahead, I am very much looking forward to what 2025 will bring. This progress, advancing from the ground up to such significant milestones, has been made possible by the incredible support from the Doris community users and developers. We encourage everyone to join the <a href="https://join.slack.com/t/apachedoriscommunity/shared_invite/zt-2zlwvmzon-NIb2rz50rIhcflGAFpYjDQ" target="_blank" rel="noopener noreferrer">Apache Doris Slack community</a> and join the dedicated channel <a href="https://apachedoriscommunity.slack.com/archives/C08CQKX20R5" target="_blank" rel="noopener noreferrer">#elasticsearch-to-doris</a>, where you can receive technical assistance, stay updated with the latest news about Doris, and engage with more Doris developers and users.</p>
<p>More on Apache Doris:</p>
<ul>
<li><a href="https://doris.apache.org/blog/apache-doris-for-log-and-time-series-data-analysis-in-netease" target="_blank" rel="noopener noreferrer">Apache Doris for log and time series data analysis in NetEase, why not Elasticsearch and InfluxDB?</a></li>
<li><a href="https://doris.apache.org/blog/from-elasticsearch-to-apache-doris-upgrading-an-observability-platform" target="_blank" rel="noopener noreferrer">From Elasticsearch to Apache Doris: upgrading an observability platform</a></li>
<li><a href="https://doris.apache.org/blog/Log-Analysis-How-to-Digest-15-Billion-Logs-Per-Day-and-Keep-Big-Queries-Within-1-Second" target="_blank" rel="noopener noreferrer">Log Analysis: How to Digest 15 Billion Logs Per Day and Keep Big Queries Within 1 Second</a></li>
<li><a href="https://doris.apache.org/blog/Replacing-Apache-Hive-Elasticsearch-and-PostgreSQL-with-Apache-Doris" target="_blank" rel="noopener noreferrer">Replacing Apache Hive, Elasticsearch and PostgreSQL with Apache Doris</a></li>
<li><a href="https://doris.apache.org/blog/Building-A-Log-Analytics-Solution-10-Times-More-Cost-Effective-Than-Elasticsearch" target="_blank" rel="noopener noreferrer">Log Analysis: Elasticsearch VS Apache Doris</a></li>
<li><a href="https://doris.apache.org/blog/inverted-index-accelerates-text-searches-by-40-time-apache-doris" target="_blank" rel="noopener noreferrer">A Deep Dive into Inverted Index in Apache Doris</a></li>
<li><a href="https://doris.apache.org/blog/variant-in-apache-doris-2.1" target="_blank" rel="noopener noreferrer">VARIANT in Apache Doris 2.1.0: a new data type 8 times faster than JSON for semi-structured data analysis</a></li>
</ul>
<p>Connect with me on <a href="https://www.linkedin.com/in/kang-xiao-441740316/" target="_blank" rel="noopener noreferrer">Linkedin</a></p>
<p>Apache Doris on <a href="https://github.com/apache/doris" target="_blank" rel="noopener noreferrer">GitHub</a></p>
<p>Apache Doris <a href="https://doris.apache.org/" target="_blank" rel="noopener noreferrer">Website</a></p></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Slash your cost by 90% with Apache Doris Compute-Storage Decoupled Mode]]></title>
            <link>https://doris.apache.org/blog/doris-compute-storage-decoupled/</link>
            <guid>https://doris.apache.org/blog/doris-compute-storage-decoupled/</guid>
            <pubDate>Fri, 21 Mar 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache Doris compute-storage decoupled mode achieves 90% cost reduction and provides elasticity and workload isolation, while maintaining high performance in data ingestion and queries.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog/">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Slash your cost by 90% with Apache Doris Compute-Storage Decoupled Mode</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">velodb.io &#xB7; Thomas Yang, Apache Doris PMC Member</span></span><time datetime="2025-03-21T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">March 21, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>In the age of data-driven decision-making, the exponential growth of data volume and the ever-evolving demands for analytics pose great challenges. Data streams in from diverse sources (such as application logs, network interactions, and mobile devices), spanning structured, semi-structured, and unstructured formats. This diversity places pressure on storage and analytical systems. Meanwhile, the surge in demand for real-time analytics and exploratory queries requires systems to deliver millisecond-level responsiveness while achieving optimal cost efficiency and elastic scalability.</p>
<p>Apache Doris emerged in the era of integrated storage and computation, built on a classic <strong>Shared Nothing</strong> architecture. In this design, storage and computation are co-located on <strong>Backend (BE) nodes</strong>, leveraging an <strong>MPP (Massively Parallel Processing)</strong> distributed computing model. This architecture delivers key advantages, including high availability, simplified deployment, seamless horizontal scalability, and exceptional real-time analytical performance.</p>
<p>For real-time analytics and small-scale data processing, Apache Doris stands out with <strong>predictable, stable low-latency performance</strong>, making it an indispensable solution. However, when scaling to large-scale data processing, it encounters certain challenges, primarily in:</p>
<ul>
<li><strong>Relatively high costs &amp; low elasticity:</strong> Balancing storage and compute resources remains a big challenge. Storage capacity must be sufficient to accommodate all data, while compute resources need to handle query workloads efficiently. However, dynamically scaling clusters is often time-consuming, prompting enterprises to over-provision resources to ensure stability. This approach simplifies operations but leads to resource waste and increased costs.</li>
<li><strong>Limited workload isolation:</strong> Since Apache Doris 2.0, Workload Groups provide soft isolation, while Resource Groups offer a degree of hard isolation. However, neither mechanism ensures complete physical isolation, which can impact performance in multi-tenant or resource-intensive environments.</li>
<li><strong>Operational complexity:</strong> Managing an OLAP system with built-in distributed storage requires not only overseeing compute nodes but also ensuring efficient storage administration. Storage management is inherently complex, and misconfigurations or improper operations can lead to data loss, making maintenance highly demanding.</li>
</ul>
<blockquote>
<p>Even so, in the absence of stable and large-scale storage support, a integrated storage-compute architecture remains the optimal choice.</p>
</blockquote>
<p>As cloud infrastructure matures, enterprises increasingly seek <strong>deeper Apache Doris integration with public clouds, private clouds, and Kubernetes (K8s) container platforms</strong> to unlock greater elasticity and flexibility. Public clouds offer mature object storage with on-demand compute resources, eliminating the need for pre-allocated space, while private clouds leverage technologies like K8s and MinIO to build scalable resource platforms. <strong>This evolution in cloud infrastructure has also accelerated Apache Doris&#x2019; transition to a storage-compute decoupled architecture, enabling lower costs, high elasticity, and enhanced workload isolation.</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="apache-doris-compute-storage-decoupled-mode">Apache Doris Compute-Storage Decoupled Mode<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled/#apache-doris-compute-storage-decoupled-mode" class="hash-link" aria-label="Direct link to Apache Doris Compute-Storage Decoupled Mode" title="Direct link to Apache Doris Compute-Storage Decoupled Mode">&#x200B;</a></h2>
<p>Since <a href="https://doris.apache.org/blog/release-note-3.0.0" target="_blank" rel="noopener noreferrer">version 3.0</a>, Apache Doris has supported both the compute-storage decoupled mode and the compute-storage coupled mode.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="01-compute-storage-decoupled">01 Compute-Storage Decoupled<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled/#01-compute-storage-decoupled" class="hash-link" aria-label="Direct link to 01 Compute-Storage Decoupled" title="Direct link to 01 Compute-Storage Decoupled">&#x200B;</a></h3>
<p>In the compute-storage decoupled mode, Apache Doris adopts a three-tier architecture consisting of three layers: shared storage, compute groups, and meta data service:</p>
<p><img decoding="async" loading="lazy" alt="compute-storage-decoupled.jpg" src="https://doris.apache.org/assets/images/compute-storage-decoupled-2d3232ea831640a90da2fda54c82051f.jpg" width="2560" height="1672" class="img_ev3q"></p>
<p><strong>Shared Storage Layer</strong></p>
<p>Data is persisted in the shared storage layer, allowing compute nodes to access and share data seamlessly. This design enhances compute node flexibility and reduces operational overhead. Leveraging mature and reliable shared storage results in ultra-low storage costs and high data reliability. Whether using public cloud object storage or enterprise-managed shared storage, this approach greatly reduces the maintenance complexity of Apache Doris.</p>
<p><strong>Compute Groups</strong></p>
<p>The compute layer consists of multiple compute groups responsible for executing query plans. Each query is executed within a single compute group, ensuring isolation and scalability. Compute nodes are stateless, utilizing local disks as high-speed caches to accelerate queries while sharing the same data and metadata services. Each compute group operates independently, supporting on-demand scaling, and local caches remain isolated to ensure workload separation and performance consistency.</p>
<p><strong>Meta Data Service</strong></p>
<p>The meta data layer manages system meta data, including databases, tables, schemas, rowset meta data, and transaction information, with support for horizontal scaling. Future iterations of Apache Doris&#x2019; compute-storage decoupled mode will introduce stateless Frontend (FE) nodes, where memory consumption is decoupled from cluster size. This evolution will eliminate memory bottlenecks, allowing FE nodes to operate with minimal memory requirements.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="02-architecture-design">02 Architecture Design<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled/#02-architecture-design" class="hash-link" aria-label="Direct link to 02 Architecture Design" title="Direct link to 02 Architecture Design">&#x200B;</a></h3>
<p>Traditional compute-storage decoupling approaches typically store both data and meta data in shared storage while centralizing transaction management on a single FE node. However, this design introduces several challenges:</p>
<ul>
<li><strong>Write performance bottlenecks</strong>: The two-phase commit protocol, driven by FE Master, incurs high latency and low throughput.</li>
<li><strong>Small file proliferation</strong>: Frequent meta data writes generate excessive small files, leading to system instability and inflated storage costs.</li>
<li><strong>Scalability constraints</strong>: Since FE nodes manage meta data in memory, an increasing number of Tablets amplifies memory pressure, eventually causing write bottlenecks.</li>
<li><strong>Data deletion risks</strong>: Relying on delta computation with timeout-based mechanisms for deletion introduces challenges in synchronizing writes and deletions. As a result, there is a risk of unintended data loss due to misalignment between ongoing writes and scheduled deletions.</li>
</ul>
<p>Compared to traditional approaches, <strong>Apache Doris</strong> effectively addresses these challenges through <strong>a shared meta data service</strong>:</p>
<ul>
<li><strong>Real-time ingestion</strong>: The meta data service provides a globally consistent view, enabling low-latency, high-throughput writes. Benchmarks show that the Apache Doris compute-storage decoupled mode achieves <strong>100X higher</strong> performance than other solutions at 50 concurrent writes and <strong>11X higher</strong> performance at 500 concurrent writes.</li>
<li><strong>Optimized small file management</strong>: Data is written to shared storage, while meta data is handled by the meta data service. This effectively reduces small file overheads. Tests indicate that the Apache Doris compute-storage decoupled mode generates only <strong>1/2 the number of write files</strong> compared to other industry solutions.</li>
<li><strong>Enhanced scalability</strong>: In future versions of Apache Doris, FE metadata will be moved to the meta data service to eliminate cluster scaling limitations and ensure seamless expansion.</li>
<li><strong>Reliable data deletion</strong>: Doris employs a forward deletion mechanism based on a globally consistent view. This ensures mutual exclusion between writes and deletions, thus eliminating the risk of accidental data loss.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="03-what-makes-it-stand-out">03 What makes it stand out<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled/#03-what-makes-it-stand-out" class="hash-link" aria-label="Direct link to 03 What makes it stand out" title="Direct link to 03 What makes it stand out">&#x200B;</a></h3>
<p>The Apache Doris compute-storage decoupled architecture provide values for users in three aspects: cost efficiency, elasticity, and workload isolation.</p>
<p><strong>Firstly, it brings a 90% cost reduction compared to the compute-storage coupled mode.</strong></p>
<ul>
<li><strong>Pay-as-you-go</strong>: Unlike traditional coupled architectures, there&#x2019;s no need to pre-provision compute and storage resources. Storage costs scale with actual usage, while compute resources can be dynamically adjusted based on demand.</li>
<li><strong>Single-replica storage</strong>: Instead of maintaining three replicas in costly block storage, data is stored as a single replica in low-cost object storage, with hot data cached in block storage for performance. This dramatically reduces storage footprint and hardware costs. For example, S3 costs only 25% to 50% of AWS EBS.</li>
<li><strong>Lower resource consumption</strong>: In compute-storage decoupled mode, compaction operations only process a single data replica, thus largely reducing resource usage compared to multi-replica environments.</li>
</ul>
<p><strong>Secondly, with a stateless compute node design, Doris enables on-demand resource scaling to meet fluctuating workloads efficiently.</strong></p>
<ul>
<li><strong>Elastic auto-scaling</strong>: Compute resources can be dynamically scaled to accommodate traffic spikes or workload variations. When demand increases, Doris can rapidly scale out compute nodes; when demand drops, resources scale down automatically, avoiding unnecessary costs.</li>
<li><strong>Fine-grained compute resource allocation</strong>: Doris allows compute nodes to be strategically assigned to specific compute groups based on workload requirements. For example, high-performance nodes handle complex queries and high-concurrency workloads, while standard nodes manage lightweight queries and infrequent requests.</li>
</ul>
<p><strong>Thirdly, Doris provides efficient resource scheduling and workload isolation mechanisms.</strong></p>
<ul>
<li><strong>Cross-business isolation</strong>: Different business units can be assigned dedicated compute groups with physical isolation, so workloads operate on dedicated resources without interference.</li>
<li><strong>Offline workload isolation</strong>: Large-scale batch processing tasks can be segregated into dedicated compute groups, so users can leverage low-cost resources for offline data processing without impacting real-time business performance.</li>
<li><strong>Read-write isolation</strong>: Doris allows dedicated compute groups for read and write operations to ensure consistent query response times even under high write loads.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking-and-comparison">Benchmarking and comparison<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled/#benchmarking-and-comparison" class="hash-link" aria-label="Direct link to Benchmarking and comparison" title="Direct link to Benchmarking and comparison">&#x200B;</a></h2>
<p>To provide a clear evaluation of the compute-storage decoupled architecture of Apache Doris, we conducted a series of benchmark tests across multiple dimensions, including data ingestion, query performance, and resource cost efficiency.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="01-ingestion-performance">01 Ingestion performance<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled/#01-ingestion-performance" class="hash-link" aria-label="Direct link to 01 Ingestion performance" title="Direct link to 01 Ingestion performance">&#x200B;</a></h3>
<p><strong>High-concurrency ingestion</strong></p>
<p>We compared Apache Doris&apos; coupled and decoupled modes with other mainstream solutions under the same compute resources. The tests measured real-time ingestion performance under two levels of concurrency:</p>
<ul>
<li><strong>50 concurrent writes</strong>: Ingesting <strong>250 files</strong>, each containing <strong>20,000 rows</strong>.</li>
<li><strong>500 concurrent writes</strong>: Ingesting <strong>10,000 files</strong>, each containing <strong>500 rows</strong>.</li>
</ul>
<p><strong>Test results:</strong></p>
<ul>
<li>At 50 concurrent writes, Doris&apos; compute-storage decoupled mode performed on par with the coupled mode while achieving <strong>100X the write performance</strong> of other industry compute-storage decoupled solutions.</li>
<li>At 500 concurrent writes, Doris&apos; decoupled mode experienced a slight performance drop compared to the coupled mode, yet still maintained an <strong>11X advantage</strong> over other compute-storage decoupled architectures.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="high-concurrency-ingestion.jpg" src="https://doris.apache.org/assets/images/high-concurrency-ingestion-d5dd1a2bf593d5d956899f9061faafff.jpg" width="2560" height="1696" class="img_ev3q"></p>
<p><strong>Batch data ingestion</strong></p>
<p>To evaluate batch data ingestion efficiency, we conducted tests using <strong>TPC-H 1TB</strong> and <strong>TPC-DS 1TB</strong> datasets, comparing the compute-storage coupled and decoupled modes of Apache Doris. Data was loaded using S3 Load. Under default configurations, multiple tables were ingested sequentially, and the total ingestion time was measured for comparison.</p>
<p>Hardware configuration:</p>
<ul>
<li>Cluster size: 4 compute instances (1 FE, 3 BE)</li>
<li>CPU: 48 cores per instance</li>
<li>Memory: 192GB per instance</li>
<li>Network Bandwidth: 21 Gbps</li>
<li>Storage: Enhanced SSD</li>
</ul>
<p><img decoding="async" loading="lazy" alt="batch-data-ingestion.jpg" src="https://doris.apache.org/assets/images/batch-data-ingestion-31be0ce398e88a036d547d4f118dd0fe.jpg" width="2560" height="1724" class="img_ev3q"></p>
<p>As is shown, even when using a single replica in both architectures, the compute-storage decoupled mode outperforms the coupled mode in batch data ingestion by <strong>20.05%</strong> and <strong>27.98%</strong> in the two benchmarks, respectively. <em>(In real-world deployments, the coupled mode typically adopts a three-replica strategy. This further amplifies the write performance gains of the decoupled mode.)</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="02-query-performance">02 Query Performance<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled/#02-query-performance" class="hash-link" aria-label="Direct link to 02 Query Performance" title="Direct link to 02 Query Performance">&#x200B;</a></h3>
<p>In the compute-storage decoupled mode, Apache Doris leverages a multi-tier caching mechanism to accelerate queries. It improves overall query efficiency by speeding up data access and minimizing reliance on shared storage. The cache hierarchy includes:</p>
<ul>
<li><strong>Doris Page Cache</strong>: In-memory caching of decompressed data.</li>
<li><strong>Linux Page Cache</strong>: In-memory caching of compressed data.</li>
<li><strong>Local Disk Cache</strong>: Persistent caching of compressed data.</li>
</ul>
<p>Hardware configuration:</p>
<ul>
<li>Cluster size: 4 compute instances (1 FE, 3 BE)</li>
<li>CPU: 48 cores per instance</li>
<li>Memory: 192GB per instance</li>
<li>Network Bandwidth: 21 Gbps</li>
<li>Storage: Enhanced SSD</li>
</ul>
<p>We conducted performance benchmarking under different caching scenarios in both compute-storage coupled and decoupled modes. Using the TPC-DS 1TB dataset, the test results are as follows:</p>
<p><img decoding="async" loading="lazy" alt="query-performance.jpg" src="https://doris.apache.org/assets/images/query-performance-ab1378fa622ca786bab45122d1fdb148.jpg" width="2560" height="1750" class="img_ev3q"></p>
<ul>
<li><strong>Full cache hit</strong>: We execute the query twice and measure the runtime of the second execution, ensuring that all data is preloaded into the cache. Query performance in compute-storage decoupled mode matches that of the coupled architecture with no performance degradation.</li>
<li><strong>Partial cache hit</strong> (This scenario best reflects real-world usage.): Before the test begins, all caches are cleared, and we measure the runtime of the first execution while data is gradually loaded into the cache. Compared to the coupled architecture, query performance remains nearly identical, with an overall performance overhead of about 10%.</li>
<li><strong>No cache hit</strong>: All caches are cleared before each SQL execution, ensuring that every query runs without cached data. Compared to the coupled architecture, query performance sees an approximate 35% degradation.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="03-resource-cost">03 Resource Cost<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled/#03-resource-cost" class="hash-link" aria-label="Direct link to 03 Resource Cost" title="Direct link to 03 Resource Cost">&#x200B;</a></h3>
<p><strong>Operational cost for online workloads</strong></p>
<p>Taking a real-world enterprise workload as an example, we compare the cost differences between compute-storage coupled and decoupled modes in Apache Doris.</p>
<ul>
<li><strong>Compute-storage coupled mode</strong>: The dataset in Doris has a size of 100TB per replica, resulting in a total of 300TB with three replicas. To prevent frequent scaling operations from impacting business stability, disk usage is maintained at about 50%. Thus, <strong>the monthly resource cost amounts to $36,962.7</strong> (as detailed below).</li>
</ul>
<p><img decoding="async" loading="lazy" alt="operational-cost-for-online-workloads.jpg" src="https://doris.apache.org/assets/images/operational-cost-for-online-workloads-b35a29cc9978a97e61ee1bbf9b4eefd7.jpg" width="2560" height="794" class="img_ev3q"></p>
<ul>
<li><strong>Compute-storage decoupled mode</strong>: With the same data scale, adopting the compute-storage decoupled model only requires storing a single replica in object storage, while hot data is cached on local disks. As shown below, the monthly resource cost is reduced to <strong>$22,212.65</strong>, achieving a 40% cost savings.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="compute-storage-decoupled-mode.jpg" src="https://doris.apache.org/assets/images/compute-storage-decoupled-mode-4adafd0d76ba5c1b2be6ca48e7ff5783.jpg" width="2954" height="840" class="img_ev3q"></p>
<p><strong>Historical data cost</strong></p>
<p>For example, with 200TB of historical data, the resource utilization under both the compute-storage coupled and decoupled modes is shown below. The coupled model incurs a monthly cost of $48,851.10, whereas the decoupled model reduces the cost to just $4,502.40&#x2014;<strong>cutting expenses by over 90%</strong>.</p>
<p><img decoding="async" loading="lazy" alt="historical-data-cost.jpg" src="https://doris.apache.org/assets/images/historical-data-cost-de9a66084e736214e67a80a659fcc278.jpg" width="3220" height="794" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&apos;s next<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled/#whats-next" class="hash-link" aria-label="Direct link to What&apos;s next" title="Direct link to What&apos;s next">&#x200B;</a></h2>
<p>Powered by compute-storage decoupling, Apache Doris excels in real-time analytics, lakehouse analytics, observability and log storage &amp; analysis. Looking ahead, Apache Doris will continue to enhance its capabilities in this mode. We will introduce new features such as snapshots, time travel, and Cross-Cluster Replication (CCR) support, and achieve stateless FE to further improve system stability and usability.</p>
<p>If you&apos;re interested in Apache Doris&apos; compute-storage decoupled mode and its future development, we invite you to join the <a href="https://apachedoriscommunity.slack.com/archives/C08HZUZ37KJ" target="_blank" rel="noopener noreferrer">#compute-storage-decoupled</a> channel in the Apache Doris Slack community, where you can connect with core developers and users. We look forward to your thoughts and contributions!</p>
<p><a href="https://www.linkedin.com/events/exploringapachedoriscompute-sto7308127084457902080/comments/" target="_blank" rel="noopener noreferrer">Join us live on March 27</a> for more insights into the Apache Doris compute-storage decoupled mode!</p></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
    </channel>
</rss>
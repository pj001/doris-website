"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["701857"],{45625:function(e,n,r){r.r(n),r.d(n,{default:()=>h,frontMatter:()=>a,metadata:()=>t,assets:()=>l,toc:()=>d,contentTitle:()=>o});var t=JSON.parse('{"id":"developer-guide/arthas","title":"Use arthas to profile fe","description":"\x3c!--","source":"@site/community/developer-guide/arthas.md","sourceDirName":"developer-guide","slug":"/developer-guide/arthas","permalink":"/community/developer-guide/arthas","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Use arthas to profile fe","language":"en"},"sidebar":"community","previous":{"title":"Use FE profiler to generate flame graph","permalink":"/community/developer-guide/fe-profiler"},"next":{"title":"Setting Up Dec Env for FE - IntelliJ IDEA","permalink":"/community/developer-guide/fe-idea-dev"}}'),s=r("785893"),i=r("250065");let a={title:"Use arthas to profile fe",language:"en"},o=void 0,l={},d=[{value:"Introduce",id:"introduce",level:2},{value:"Using Arthas in Older FE Versions",id:"using-arthas-in-older-fe-versions",level:2}];function c(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"introduce",children:"Introduce"}),"\n",(0,s.jsxs)(n.p,{children:["Starting from Doris version 3.1.0, the Arthas tool (version 4.0.5) is included in the FE deployment directory ",(0,s.jsx)(n.code,{children:"${DORIS_FE_HOME}/arthas"}),". Arthas can be used to generate flame graphs, trace method call paths, output method execution times, observe method parameters and return values, and more. This makes it easier to diagnose various runtime issues in the FE process.\nFor detailed usage instructions, please refer to the ",(0,s.jsx)(n.a,{href:"https://arthas.aliyun.com/en/doc/",children:"official Arthas documentation"})]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"Note: Currently, only Linux and macOS are supported. Windows is not supported yet."})}),"\n",(0,s.jsx)(n.p,{children:"Example: Generating a Flame Graph"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Run the ",(0,s.jsx)(n.code,{children:"${DORIS_FE_HOME}/arthas/as.sh"})," script and select the DorisFE process:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"bash ./as.sh\nArthas script version: 4.0.5\nFound existing java process, please choose one and input the serial number of the process, eg : 1. Then hit ENTER.\n* [1]: 75123 com.intellij.idea.Main\n  [2]: 77285 org.apache.doris.DorisFE\n  [3]: 76901 DorisBE\n  [4]: 6776 org.jetbrains.jps.cmdline.Launcher\n  [5]: 76265 DorisBE\n  [6]: 80527 org.jetbrains.jps.cmdline.Launcher\n2\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Start profiling:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"[arthas@77285]$ profiler start\nProfiling started\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Stop profiling and generate a flame graph file named 20250627-115104.html:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"[arthas@77285]$ profiler stop --format html\nOK\nprofiler output file: <DORIS_FE_HOME>/arthas-output/20250627-115104.html\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"using-arthas-in-older-fe-versions",children:"Using Arthas in Older FE Versions"}),"\n",(0,s.jsx)(n.p,{children:"For versions prior to 3.1, you need to manually download Arthas:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"wget https://github.com/alibaba/arthas/releases/download/arthas-all-4.0.5/arthas-bin.zip\nunzip arthas-bin.zip -o ${DORIS_FE_HOME}/arthas\n"})})]})}function h(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return o},a:function(){return a}});var t=r(667294);let s={},i=t.createContext(s);function a(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);